"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[56],{56:(B,k,u)=>{u.r(k),u.d(k,{CustomersPageModule:()=>Y});var S=u(6814),t=u(95),i=u(3800),v=u(2436),e=u(5678);let A=(()=>{var o;class a{constructor(){}ngOnInit(){console.log("customer page loaded..")}}return(o=a).\u0275fac=function(r){return new(r||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-customers"]],decls:9,vars:0,consts:[["slot","bottom"],["tab","create"],["name","person-add-outline"],["tab","report"],["name","people-outline"]],template:function(r,n){1&r&&(e._UZ(0,"ion-router-outlet"),e.TgZ(1,"ion-tabs")(2,"ion-tab-bar",0)(3,"ion-tab-button",1),e._UZ(4,"ion-icon",2),e._uU(5," Add Customer "),e.qZA(),e.TgZ(6,"ion-tab-button",3),e._UZ(7,"ion-icon",4),e._uU(8," Customer Reports "),e.qZA()()())},dependencies:[i.gu,i.yq,i.ZU,i.UN,i.jP]}),a})();var b=u(8380),N=u(7906),I=u(3289),F=u(2370),U=u(4429),P=u(74);let q=(()=>{var o;class a{constructor(r){this.el=r,this.element=r.nativeElement}onInput(r){this.element.value=this.element.value.toUpperCase()}}return(o=a).\u0275fac=function(r){return new(r||o)(e.Y36(e.SBq))},o.\u0275dir=e.lG2({type:o,selectors:[["","appUpperCase",""]],hostBindings:function(r,n){1&r&&e.NdJ("input",function(){return n.onInput()})("change",function(){return n.onInput()})}}),a})();function x(o,a){1&o&&e._UZ(0,"div")}function y(o,a){if(1&o){const s=e.EpF();e.TgZ(0,"form",6),e.NdJ("ngSubmit",function(){e.CHM(s);const n=e.oxw();return e.KtG(n.onSubmit())}),e.TgZ(1,"ion-item"),e._UZ(2,"ion-input",7),e.qZA(),e.TgZ(3,"ion-item"),e._UZ(4,"ion-input",8),e.qZA(),e.TgZ(5,"ion-item"),e._UZ(6,"ion-input",9),e.qZA(),e.TgZ(7,"ion-item"),e._UZ(8,"ion-input",10),e.qZA(),e.TgZ(9,"ion-grid",11)(10,"ion-item"),e._UZ(11,"ion-input",12),e.qZA(),e.TgZ(12,"ion-item"),e._UZ(13,"ion-input",13),e.qZA(),e.TgZ(14,"ion-item"),e._UZ(15,"ion-input",14),e.qZA(),e.TgZ(16,"ion-item"),e._UZ(17,"ion-input",15),e.qZA(),e.TgZ(18,"ion-item"),e._UZ(19,"ion-input",16),e.qZA(),e.TgZ(20,"ion-item"),e._UZ(21,"ion-input",17),e.qZA()(),e.TgZ(22,"ion-button",18),e._uU(23," Create Order "),e.qZA()()}if(2&o){const s=e.oxw();e.Q6J("formGroup",s.customerCreateForm),e.xp6(6),e.Q6J("maxlength",15),e.xp6(2),e.Q6J("maxlength",10),e.xp6(13),e.Q6J("maxlength",6),e.xp6(1),e.Q6J("disabled",!s.customerCreateForm.valid)}}function w(o,a){if(1&o){const s=e.EpF();e.TgZ(0,"ion-card")(1,"ion-card-content")(2,"h2"),e._uU(3,"Customer has been created successfully with id: "),e.TgZ(4,"strong"),e._uU(5),e.qZA()()(),e.TgZ(6,"ion-button",19),e.NdJ("click",function(){e.CHM(s);const n=e.oxw();return e.KtG(n.viewCustomerDetails())}),e._uU(7,"View Customers"),e.qZA(),e._UZ(8,"br"),e.TgZ(9,"ion-button",19),e.NdJ("click",function(){e.CHM(s);const n=e.oxw();return e.KtG(n.createAnotherCustomer())}),e._uU(10,"Create New Customer"),e.qZA()()}if(2&o){const s=e.oxw();e.xp6(5),e.Oqu(null==s.newCreatedCustomer?null:s.newCreatedCustomer.id)}}function _(o,a){if(1&o&&(e.TgZ(0,"ion-item",3)(1,"ion-label")(2,"h4",4)(3,"ion-text",5),e._UZ(4,"ion-icon",6),e._uU(5),e.qZA()(),e.TgZ(6,"ion-text",7)(7,"h3")(8,"strong"),e._uU(9),e.qZA()()(),e._UZ(10,"br"),e.TgZ(11,"h4")(12,"strong"),e._uU(13,"GST: "),e.qZA(),e._uU(14),e.qZA(),e._UZ(15,"br"),e.TgZ(16,"h5")(17,"strong"),e._uU(18," Address: "),e.qZA(),e._uU(19),e.qZA()()()),2&o){const s=a.$implicit;e.MGl("routerLink","/customers/",s.id,""),e.xp6(5),e.hij(" ",s.phoneNumber,""),e.xp6(4),e.Oqu(s.fullName),e.xp6(5),e.Oqu(s.gstNumber),e.xp6(5),e.xDo(" ",null==s.address?null:s.address.addressOne,", ",null!=s.address&&s.address.addressTwo?(null==s.address?null:s.address.addressTwo)+",":""," ",null==s.address?null:s.address.city,", ",null==s.address?null:s.address.district,", ",null==s.address?null:s.address.state," ")}}const M=[{path:"",component:A,children:[{path:"create",component:(()=>{var o;class a{constructor(r,n,d,l,c){this.formBuilder=r,this.addressesStore=n,this.loginUserStore=d,this.customerStore=l,this.router=c,this.customerCreated=!1,this.showSpinner=!1}ngOnInit(){this.initializeForm()}ionViewWillEnter(){this.customerCreated=!1,this.newCreatedCustomer=void 0,this.initializeForm()}ionViewWillLeave(){console.log("Page leaving....")}ionViewDidLeave(){}initializeForm(){this.customerCreateForm=this.formBuilder.group({firstName:["",[t.kI.required]],lastName:["",[t.kI.required]],gstNumber:["",[t.kI.required]],phoneNumber:["",[t.kI.required,t.kI.pattern("^((\\+91-?)|0)?[0-9]{10}$")]],address:this.formBuilder.group({addressOne:["",t.kI.required],addressTwo:["",t.kI.required],city:["",t.kI.required],district:["",t.kI.required],state:["",t.kI.required],pinCode:["",[t.kI.required,t.kI.minLength(6),t.kI.maxLength(6)]]})})}onSubmit(){if(this.customerCreateForm.valid){let r={id:Math.max(...this.customerStore.customers.map(d=>d.id))+1,firstName:this.customerCreateForm.value.firstName,lastName:this.customerCreateForm.value.lastName,gstNumber:this.customerCreateForm.value.gstNumber,phoneNumber:this.customerCreateForm.value.phoneNumber,createdOn:N.E.currentDate(b.f.SYSTEM_DATE_TIME_FORMAT),createdBy:this.loginUserStore.loggedInUser.id,modifiedOn:N.E.currentDate(b.f.SYSTEM_DATE_TIME_FORMAT),modifiedBy:this.loginUserStore.loggedInUser.id},n={id:Math.max(...this.addressesStore.addresses.map(d=>d.id))+1,addressOne:this.customerCreateForm.value.address.addressOne,addressTwo:this.customerCreateForm.value.address.addressTwo,city:this.customerCreateForm.value.address.city,district:this.customerCreateForm.value.address.district,state:this.customerCreateForm.value.address.state,country:"IN",addressType:"CUSTOMER",customerId:r.id,pinCode:this.customerCreateForm.value.address.pinCode,createdOn:N.E.currentDate(b.f.SYSTEM_DATE_TIME_FORMAT),createdBy:this.loginUserStore.loggedInUser.id,modifiedOn:N.E.currentDate(b.f.SYSTEM_DATE_TIME_FORMAT),modifiedBy:this.loginUserStore.loggedInUser.id};this.newCreatedCustomer=r,this.customerStore.customers.unshift(r),this.addressesStore.addresses.unshift(n),this.showSpinner=!0,setTimeout(()=>{this.showSpinner=!1,this.customerCreated=!0},2e3),console.log(n),console.log(r)}}viewCustomerDetails(){this.router.navigate(["customers/report"])}createAnotherCustomer(){this.customerCreated=!1,this.newCreatedCustomer=void 0,this.customerCreateForm.reset(),this.ionViewWillEnter()}}return(o=a).\u0275fac=function(r){return new(r||o)(e.Y36(t.qu),e.Y36(I.u),e.Y36(F.k),e.Y36(U.k),e.Y36(v.F0))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-create-customer"]],decls:8,vars:4,consts:[["pageName","Create Customer"],["fullscreen","true"],[4,"ngIf","ngIfThen","ngIfElse"],["customerCreationSection",""],["customerCreatedSection",""],["message","Processing create customer request",3,"isOpen"],[3,"formGroup","ngSubmit"],["labelPlacement","stacked","label","First Name","formControlName","firstName","placeholder","Provide First Name"],["labelPlacement","stacked","label","Last Name","formControlName","lastName","placeholder","Provide Second Name"],["labelPlacement","stacked","label","GST Number","formControlName","gstNumber","placeholder","Provide GST","appUpperCase","",3,"maxlength"],["labelPlacement","stacked","label","Phone Number","formControlName","phoneNumber","placeholder","Provide Phone Number","type","number",3,"maxlength"],["formGroupName","address"],["labelPlacement","stacked","label","Address1","formControlName","addressOne","placeholder","Provide Address1"],["labelPlacement","stacked","label","Address2","formControlName","addressTwo","placeholder","Provide Address2"],["labelPlacement","stacked","label","City","formControlName","city","placeholder","Provide city"],["labelPlacement","stacked","label","District","formControlName","district","placeholder","Provide District"],["labelPlacement","stacked","label","State","formControlName","state","placeholder","Provide State"],["labelPlacement","stacked","label","Pin Code","formControlName","pinCode","placeholder","Provide Pin Code","type","number",3,"maxlength"],["expand","block","type","submit",3,"disabled"],["fill","solid","expand","block",3,"click"]],template:function(r,n){if(1&r&&(e._UZ(0,"app-header",0),e.TgZ(1,"ion-content",1),e.YNc(2,x,1,0,"div",2)(3,y,24,5,"ng-template",null,3,e.W1O)(5,w,11,1,"ng-template",null,4,e.W1O),e.qZA(),e._UZ(7,"ion-loading",5)),2&r){const d=e.MAs(4),l=e.MAs(6);e.xp6(2),e.Q6J("ngIf",n.customerCreated)("ngIfThen",l)("ngIfElse",d),e.xp6(5),e.Q6J("isOpen",n.showSpinner)}},dependencies:[S.O5,t._Y,t.JJ,t.JL,t.nD,i.YG,i.PM,i.FN,i.W2,i.jY,i.pK,i.Ie,i.wh,i.as,i.j9,P.G,t.sg,t.u,t.x0,q]}),a})()},{path:"report",component:(()=>{var o;class a{constructor(r,n,d){this.customerStore=r,this.addressesStore=n,this.router=d}ngOnInit(){console.log("customer report loaded..")}ionViewWillEnter(){var r,n;this.customers=[];let d=new Map;null===(r=this.addressesStore.addresses)||void 0===r||r.forEach(l=>{"CUSTOMER"===l.addressType&&d.set(l.customerId,l)}),null===(n=this.customerStore.customers)||void 0===n||n.forEach(l=>{l.address=d.get(l.id),l.fullName=l.firstName+" "+l.lastName}),this.customers=this.customerStore.customers}showCustomerDetails(r){this.router.navigate(["customers/"+r.id])}}return(o=a).\u0275fac=function(r){return new(r||o)(e.Y36(U.k),e.Y36(I.u),e.Y36(v.F0))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-customers-report"]],decls:4,vars:1,consts:[["pageName","Customers Report"],["fullscreen","true"],["slot","start",3,"routerLink",4,"ngFor","ngForOf"],["slot","start",3,"routerLink"],[1,"ion-text-end","ion-float-right"],["color","secondary"],["name","call-outline"],["color","primary"]],template:function(r,n){1&r&&(e._UZ(0,"app-header",0),e.TgZ(1,"ion-content",1)(2,"ion-list"),e.YNc(3,_,20,9,"ion-item",2),e.qZA()()),2&r&&(e.xp6(3),e.Q6J("ngForOf",n.customers))},dependencies:[S.sg,i.W2,i.gu,i.Ie,i.Q$,i.q_,i.yW,i.YI,v.rH,P.G],styles:["ion-card[_ngcontent-%COMP%]{margin:5px}"]}),a})()},{path:":id",component:(()=>{var o;class a{constructor(r,n,d,l,c){this.addressesStore=r,this.customerStore=n,this.activatedRoute=d,this.router=l,this.formBuilder=c,this.defaultHref="customers/report",this.showSpinner=!1}ngOnInit(){this.customerDetailsForm=this.formBuilder.group({firstName:["",[t.kI.required]],lastName:["",[t.kI.required]],gstNumber:["",[t.kI.required,t.kI.minLength(15),t.kI.maxLength(15)]],phoneNumber:["",[t.kI.required,t.kI.pattern("^((\\+91-?)|0)?[0-9]{10}$")]],address:this.formBuilder.group({addressOne:["",t.kI.required],addressTwo:["",t.kI.required],city:["",t.kI.required],district:["",t.kI.required],state:["",t.kI.required],pinCode:["",[t.kI.required,t.kI.minLength(6),t.kI.maxLength(6)]]})})}ionViewWillEnter(){var r,n;let d=new Map;null===(r=this.addressesStore.addresses)||void 0===r||r.forEach(m=>{"CUSTOMER"===m.addressType&&d.set(m.customerId,m)}),null===(n=this.customerStore.customers)||void 0===n||n.forEach(m=>{m.address=d.get(m.id),m.fullName=m.firstName+" "+m.lastName});const l=this.activatedRoute.snapshot.paramMap.get("id");if(l&&!Number.isNaN(l)&&this.customerStore.customers)if(this.selectedCustomer=this.customerStore.customers.find(m=>m.id===+l),this.selectedCustomer){var c,p,g,h,C,f;this.customerDetailsForm=this.formBuilder.group({firstName:[this.selectedCustomer.firstName,[t.kI.required]],lastName:[this.selectedCustomer.lastName,[t.kI.required]],gstNumber:[this.selectedCustomer.gstNumber,[t.kI.required]],phoneNumber:[this.selectedCustomer.phoneNumber,[t.kI.required,t.kI.pattern("^((\\+91-?)|0)?[0-9]{10}$")]],address:this.formBuilder.group({addressOne:[null===(c=this.selectedCustomer.address)||void 0===c?void 0:c.addressOne,t.kI.required],addressTwo:[null===(p=this.selectedCustomer.address)||void 0===p?void 0:p.addressTwo,t.kI.required],city:[null===(g=this.selectedCustomer.address)||void 0===g?void 0:g.city,t.kI.required],district:[null===(h=this.selectedCustomer.address)||void 0===h?void 0:h.district,t.kI.required],state:[null===(C=this.selectedCustomer.address)||void 0===C?void 0:C.state,t.kI.required],pinCode:[null===(f=this.selectedCustomer.address)||void 0===f?void 0:f.pinCode,[t.kI.required,t.kI.minLength(6),t.kI.maxLength(6)]]})}),this.customerDetailsForm.markAsTouched()}else console.log("Customer not available");this.selectedCustomer||this.router.navigate(["customers/report"])}onSubmit(){if(this.customerDetailsForm.valid){var r,n,d,l,c,p,g,h,C,f;let m=this.customerStore.customers.findIndex(T=>T.id===this.selectedCustomer.id),Z=this.addressesStore.addresses.findIndex(T=>T.customerId===this.selectedCustomer.id&&"CUSTOMER"===T.addressType);this.customerStore.customers[m].firstName=null===(r=this.customerDetailsForm.get("firstName"))||void 0===r?void 0:r.value,this.customerStore.customers[m].lastName=null===(n=this.customerDetailsForm.get("lastName"))||void 0===n?void 0:n.value,this.customerStore.customers[m].gstNumber=null===(d=this.customerDetailsForm.get("gstNumber"))||void 0===d?void 0:d.value.toUpperCase(),this.customerStore.customers[m].phoneNumber=null===(l=this.customerDetailsForm.get("phoneNumber"))||void 0===l?void 0:l.value,this.addressesStore.addresses[Z].addressOne=null===(c=this.customerDetailsForm.get("address"))||void 0===c||null===(c=c.get("addressOne"))||void 0===c?void 0:c.value,this.addressesStore.addresses[Z].addressTwo=null===(p=this.customerDetailsForm.get("address"))||void 0===p||null===(p=p.get("addressTwo"))||void 0===p?void 0:p.value,this.addressesStore.addresses[Z].city=null===(g=this.customerDetailsForm.get("address"))||void 0===g||null===(g=g.get("city"))||void 0===g?void 0:g.value,this.addressesStore.addresses[Z].district=null===(h=this.customerDetailsForm.get("address"))||void 0===h||null===(h=h.get("district"))||void 0===h?void 0:h.value,this.addressesStore.addresses[Z].state=null===(C=this.customerDetailsForm.get("address"))||void 0===C||null===(C=C.get("state"))||void 0===C?void 0:C.value,this.addressesStore.addresses[Z].pinCode=null===(f=this.customerDetailsForm.get("address"))||void 0===f||null===(f=f.get("pinCode"))||void 0===f?void 0:f.value,console.log(this.addressesStore.addresses[Z]),this.showSpinner=!0,setTimeout(()=>{this.showSpinner=!1,setTimeout(()=>{this.router.navigate(["customers/report"])},100)},2e3)}}}return(o=a).\u0275fac=function(r){return new(r||o)(e.Y36(I.u),e.Y36(U.k),e.Y36(v.gz),e.Y36(v.F0),e.Y36(t.qu))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-customer-details"]],decls:32,vars:7,consts:[[3,"translucent"],["slot","start"],["text","",3,"defaultHref"],["fullscreen","true"],[3,"formGroup","ngSubmit"],["labelPlacement","stacked","label","First Name","formControlName","firstName","placeholder","Provide First Name"],["labelPlacement","stacked","label","Last Name","formControlName","lastName","placeholder","Provide Second Name"],["labelPlacement","stacked","label","GST Number","formControlName","gstNumber","placeholder","Provide GST","appUpperCase","",3,"maxlength"],["labelPlacement","stacked","label","Phone Number","formControlName","phoneNumber","placeholder","Provide Phone Number","type","number",3,"maxlength"],["formGroupName","address"],["labelPlacement","stacked","label","Address1","formControlName","addressOne","placeholder","Provide Address1"],["labelPlacement","stacked","label","Address2","formControlName","addressTwo","placeholder","Provide Address2"],["labelPlacement","stacked","label","City","formControlName","city","placeholder","Provide city"],["labelPlacement","stacked","label","District","formControlName","district","placeholder","Provide District"],["labelPlacement","stacked","label","State","formControlName","state","placeholder","Provide State"],["labelPlacement","stacked","label","Pin Code","formControlName","pinCode","placeholder","Provide Pin Code","type","number"],["expand","block","type","submit",3,"disabled"],["message","Processing update customer request",3,"isOpen"]],template:function(r,n){1&r&&(e.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1),e._UZ(3,"ion-back-button",2),e.qZA(),e.TgZ(4,"ion-title"),e._uU(5," Customer Details "),e.qZA()()(),e.TgZ(6,"ion-content",3)(7,"form",4),e.NdJ("ngSubmit",function(){return n.onSubmit()}),e.TgZ(8,"ion-item"),e._UZ(9,"ion-input",5),e.qZA(),e.TgZ(10,"ion-item"),e._UZ(11,"ion-input",6),e.qZA(),e.TgZ(12,"ion-item"),e._UZ(13,"ion-input",7),e.qZA(),e.TgZ(14,"ion-item"),e._UZ(15,"ion-input",8),e.qZA(),e.TgZ(16,"ion-grid",9)(17,"ion-item"),e._UZ(18,"ion-input",10),e.qZA(),e.TgZ(19,"ion-item"),e._UZ(20,"ion-input",11),e.qZA(),e.TgZ(21,"ion-item"),e._UZ(22,"ion-input",12),e.qZA(),e.TgZ(23,"ion-item"),e._UZ(24,"ion-input",13),e.qZA(),e.TgZ(25,"ion-item"),e._UZ(26,"ion-input",14),e.qZA(),e.TgZ(27,"ion-item"),e._UZ(28,"ion-input",15),e.qZA()(),e.TgZ(29,"ion-button",16),e._uU(30," Update Customer "),e.qZA()()(),e._UZ(31,"ion-loading",17)),2&r&&(e.Q6J("translucent",!0),e.xp6(3),e.Q6J("defaultHref",n.defaultHref),e.xp6(4),e.Q6J("formGroup",n.customerDetailsForm),e.xp6(6),e.Q6J("maxlength",15),e.xp6(2),e.Q6J("maxlength",10),e.xp6(14),e.Q6J("disabled",!n.customerDetailsForm.valid),e.xp6(2),e.Q6J("isOpen",n.showSpinner))},dependencies:[t._Y,t.JJ,t.JL,t.nD,i.YG,i.Sm,i.W2,i.jY,i.Gu,i.pK,i.Ie,i.wh,i.wd,i.sr,i.as,i.j9,i.oU,t.sg,t.u,t.x0,q]}),a})()},{path:"",redirectTo:"report",pathMatch:"full"}]}];let E=(()=>{var o;class a{}return(o=a).\u0275fac=function(r){return new(r||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[v.Bz.forChild(M),v.Bz]}),a})();var J=u(6208);let Y=(()=>{var o;class a{}return(o=a).\u0275fac=function(r){return new(r||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[S.ez,t.u5,i.Pc,E,J.m]}),a})()}}]);