"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9664],{9664:(ae,J,f)=>{f.r(J),f.d(J,{OrdersPageModule:()=>de});var A=f(6814),i=f(95),d=f(3800),_=f(2436),y=f(5037),c=f(8380),Z=f(7906),e=f(5678),G=f(4429),Q=f(3289),Y=f(495),R=f(74);function z(r,s){if(1&r){const o=e.EpF();e.TgZ(0,"ion-radio-group",9),e.NdJ("ionChange",function(){const l=e.CHM(o).$implicit,a=e.oxw();return e.KtG(a.checkValue(l))}),e.TgZ(1,"ion-item")(2,"ion-radio",10),e._uU(3),e.qZA(),e._UZ(4,"br"),e.qZA()()}if(2&r){const o=s.$implicit,t=e.oxw();e.s9C("value",null==t.workingSelectedCusomter?null:t.workingSelectedCusomter.id),e.xp6(2),e.s9C("value",o.id),e.xp6(1),e.Oqu(o.fullName)}}let B=(()=>{var r;class s{constructor(){this.customers=[],this.title="Select Customers",this.selectionCancel=new e.vpe,this.selectionChange=new e.vpe,this.filteredItems=[]}ngOnInit(){this.filteredItems=[...this.customers],this.workingSelectedCusomter=this.selectedCustomer}trackItems(t,n){return n.id}cancelChanges(){this.selectionCancel.emit()}confirmChanges(){this.workingSelectedCusomter&&(console.log(this.workingSelectedCusomter),this.selectionChange.emit(this.workingSelectedCusomter))}searchbarInput(t){this.filterList(t.target.value)}filterList(t){if(void 0===t)this.filteredItems=[...this.customers];else{const n=t.toLowerCase();this.filteredItems=this.customers.filter(l=>{var a;return null===(a=l.fullName)||void 0===a?void 0:a.toLowerCase().includes(n)})}}checkValue(t){this.workingSelectedCusomter=t}}return(r=s).\u0275fac=function(t){return new(t||r)},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-customers-typeahead"]],inputs:{customers:"customers",selectedCustomer:"selectedCustomer",title:"title"},outputs:{selectionCancel:"selectionCancel",selectionChange:"selectionChange"},decls:15,vars:3,consts:[["slot","end"],["fill","solid","color","primary","expand","block","shape","round",3,"click"],[3,"ionInput"],["color","light",1,"ion-padding"],["id","modal-list",3,"inset"],[3,"value","ionChange",4,"ngFor","ngForOf"],["slot","fixed","vertical","bottom","horizontal","end"],[3,"click"],["name","checkmark-outline"],[3,"value","ionChange"],[3,"value"]],template:function(t,n){1&t&&(e.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),e._uU(3),e.qZA(),e.TgZ(4,"ion-buttons",0)(5,"ion-button",1),e.NdJ("click",function(){return n.cancelChanges()}),e._uU(6,"Cancel"),e.qZA()()(),e.TgZ(7,"ion-toolbar")(8,"ion-searchbar",2),e.NdJ("ionInput",function(a){return n.searchbarInput(a)}),e.qZA()()(),e.TgZ(9,"ion-content",3)(10,"ion-list",4),e.YNc(11,z,5,3,"ion-radio-group",5),e.qZA(),e.TgZ(12,"ion-fab",6)(13,"ion-fab-button",7),e.NdJ("click",function(){return n.confirmChanges()}),e._UZ(14,"ion-icon",8),e.qZA()()()),2&t&&(e.xp6(3),e.Oqu(n.title),e.xp6(7),e.Q6J("inset",!0),e.xp6(1),e.Q6J("ngForOf",n.filteredItems))},dependencies:[A.sg,d.YG,d.Sm,d.W2,d.IJ,d.W4,d.Gu,d.gu,d.Ie,d.q_,d.B7,d.se,d.VI,d.wd,d.sr,d.U5,d.QI,d.j9]}),s})();const V=["selectCustomer"];function H(r,s){1&r&&e._UZ(0,"div")}function L(r,s){if(1&r){const o=e.EpF();e.TgZ(0,"ion-content")(1,"ion-datetime",23),e.NdJ("ionChange",function(n){e.CHM(o);const l=e.oxw(2);return e.KtG(l.orderedDateChange(n))}),e.qZA()()}if(2&r){const o=e.oxw(2);e.xp6(1),e.Q6J("value",o.defaultOrderDate)("showDefaultButtons",!0)("showDefaultTitle",!0)}}function K(r,s){if(1&r){const o=e.EpF();e.TgZ(0,"ion-content")(1,"ion-datetime",23),e.NdJ("ionChange",function(n){e.CHM(o);const l=e.oxw(2);return e.KtG(l.expectedDeliveryDateChange(n))}),e.qZA()()}if(2&r){const o=e.oxw(2);e.xp6(1),e.Q6J("value",o.defaultExpectedDate)("showDefaultButtons",!0)("showDefaultTitle",!0)}}function W(r,s){1&r&&(e.TgZ(0,"ion-grid",24)(1,"ion-item"),e._UZ(2,"ion-input",25),e.qZA(),e.TgZ(3,"ion-item"),e._UZ(4,"ion-input",26),e.qZA(),e.TgZ(5,"ion-item"),e._UZ(6,"ion-input",27),e.qZA(),e.TgZ(7,"ion-item"),e._UZ(8,"ion-input",28),e.qZA(),e.TgZ(9,"ion-item"),e._UZ(10,"ion-input",29),e.qZA(),e.TgZ(11,"ion-item"),e._UZ(12,"ion-input",30),e.qZA()()),2&r&&(e.xp6(12),e.Q6J("maxlength",6))}function j(r,s){if(1&r){const o=e.EpF();e.TgZ(0,"form",8),e.NdJ("ngSubmit",function(){e.CHM(o);const n=e.oxw();return e.KtG(n.onSubmit())}),e.TgZ(1,"ion-item",9),e.NdJ("click",function(){e.CHM(o);const n=e.oxw();return e.KtG(n.openSelectCustomerPopup())}),e._UZ(2,"ion-input",10),e.qZA(),e.TgZ(3,"ion-item"),e._UZ(4,"ion-input",11),e.qZA(),e.TgZ(5,"ion-item"),e._UZ(6,"ion-input",12),e.qZA(),e.TgZ(7,"ion-item"),e._UZ(8,"ion-input",13),e.qZA(),e.TgZ(9,"ion-item"),e._UZ(10,"ion-input",14),e.TgZ(11,"ion-button",15),e._UZ(12,"ion-icon",16),e.qZA(),e.TgZ(13,"ion-modal",17),e.YNc(14,L,2,3,"ng-template"),e.qZA()(),e.TgZ(15,"ion-item"),e._UZ(16,"ion-input",18),e.TgZ(17,"ion-button",15),e._UZ(18,"ion-icon",16),e.qZA(),e.TgZ(19,"ion-modal",19),e.YNc(20,K,2,3,"ng-template"),e.qZA()(),e.TgZ(21,"ion-item")(22,"ion-toggle",20),e.NdJ("ionChange",function(n){e.CHM(o);const l=e.oxw();return e.KtG(l.useCustomerAddressChange(n))}),e._uU(23," Apply customer address for delivery "),e.qZA()(),e.YNc(24,W,13,1,"ion-grid",21),e.TgZ(25,"ion-button",22),e._uU(26," Create Order "),e.qZA()()}if(2&r){const o=e.oxw();e.Q6J("formGroup",o.orderForm),e.xp6(1),e.Q6J("button",!0)("detail",!1),e.xp6(12),e.Q6J("keepContentsMounted",!0),e.xp6(6),e.Q6J("keepContentsMounted",!0),e.xp6(5),e.Q6J("ngIf",!o.hideAddress),e.xp6(1),e.Q6J("disabled",!o.orderForm.valid)}}function X(r,s){if(1&r){const o=e.EpF();e.TgZ(0,"ion-card")(1,"ion-card-content")(2,"h2"),e._uU(3,"New order has been created successfully with id: "),e.TgZ(4,"strong"),e._uU(5),e.qZA()()(),e.TgZ(6,"ion-button",31),e.NdJ("click",function(){e.CHM(o);const n=e.oxw();return e.KtG(n.viewOrderDetails())}),e._uU(7,"View Order Details"),e.qZA(),e._UZ(8,"br"),e.TgZ(9,"ion-button",31),e.NdJ("click",function(){e.CHM(o);const n=e.oxw();return e.KtG(n.createAnotherOrder())}),e._uU(10,"Create New Order"),e.qZA()()}if(2&r){const o=e.oxw();e.xp6(5),e.Oqu(null==o.newCreatedOrder?null:o.newCreatedOrder.id)}}function F(r,s){if(1&r){const o=e.EpF();e.TgZ(0,"app-customers-typeahead",32),e.NdJ("selectionChange",function(n){e.CHM(o);const l=e.oxw();return e.KtG(l.customerSelectedEvent(n))})("selectionCancel",function(){e.CHM(o);const n=e.oxw();return e.MAs(8).dismiss(),e.KtG(n.openSelectCustomer=!1)}),e.qZA()}if(2&r){const o=e.oxw();e.Q6J("customers",o.customers)("selectedCustomer",o.chosenCustomer)}}let $=(()=>{var r;class s{constructor(t,n,l,a,u){this.formBuilder=t,this.customerStore=n,this.addressesStore=l,this.orderStore=a,this.router=u,this.hideAddress=!0,this.showSpinner=!1,this.orderCreated=!1,this.openSelectCustomer=!1,this.defaultOrderDate=y.ou.now(),this.defaultExpectedDate=y.ou.now().plus({day:2})}ngOnInit(){console.log("Create order initialized..."),this.initializeOrderCreateForm()}ionViewWillEnter(){var t,n;this.hideAddress=!0,this.chosenCustomer=void 0,this.orderCreated=!1;let l=new Map;null===(t=this.addressesStore.addresses)||void 0===t||t.forEach(a=>{"CUSTOMER"===a.addressType&&l.set(a.customerId,a)}),null===(n=this.customerStore.customers)||void 0===n||n.forEach(a=>{a.address=l.get(a.id),a.fullName=a.firstName+" "+a.lastName}),this.customers=this.customerStore.customers,this.initializeOrderCreateForm()}initializeOrderCreateForm(){this.orderForm=this.formBuilder.group({customerName:["",[i.kI.required]],size:["",[i.kI.required,i.kI.min(1)]],quantity:["",[i.kI.required,i.kI.min(1)]],gsm:["",[i.kI.required,i.kI.min(1)]],useCustomerAddress:[{value:!0,disabled:!0},[i.kI.required]],address:this.formBuilder.group({addressOne:[{value:"",disabled:!0},i.kI.required],addressTwo:[{value:"",disabled:!0},i.kI.required],city:[{value:"",disabled:!0},i.kI.required],district:[{value:"",disabled:!0},i.kI.required],state:[{value:"",disabled:!0},i.kI.required],pinCode:[{value:"",disabled:!0},[i.kI.required,i.kI.minLength(6),i.kI.maxLength(6)]]}),orderedDate:[this.defaultOrderDate.toFormat(c.f.DISPAY_DATE_TIME_FORMAT),i.kI.required],expectedDeliveryDate:[this.defaultExpectedDate.toFormat(c.f.DISPAY_DATE_TIME_FORMAT),i.kI.required]})}onSubmit(){if(this.orderForm.valid){var t,n,l;let C;var m,a,u,v;this.orderForm.value.useCustomerAddress?C=null===(m=this.chosenCustomer)||void 0===m?void 0:m.address:(C={id:Math.max(...this.addressesStore.addresses.map(T=>T.id))+1,addressOne:this.orderForm.value.address.addressOne,addressTwo:this.orderForm.value.address.addressTwo,city:this.orderForm.value.address.city,district:this.orderForm.value.address.district,state:this.orderForm.value.address.state,country:"IN",pinCode:this.orderForm.value.address.pinCode,customerId:null===(a=this.chosenCustomer)||void 0===a?void 0:a.id,addressType:"ORDER",createdOn:Z.E.currentDate(c.f.SYSTEM_DATE_TIME_FORMAT),createdBy:null===(u=this.chosenCustomer)||void 0===u?void 0:u.createdBy,modifiedOn:Z.E.currentDate(c.f.SYSTEM_DATE_TIME_FORMAT),modifiedBy:null===(v=this.chosenCustomer)||void 0===v?void 0:v.modifiedBy},this.addressesStore.addresses.unshift(C));let p={id:Math.max(...this.orderStore.orders.map(T=>T.id))+1,customer:this.chosenCustomer,size:this.orderForm.value.size,quantity:this.orderForm.value.quantity,gsm:this.orderForm.value.gsm,address:C,status:"ORDERED",orderedDate:Z.E.convertDateTime(this.orderForm.value.orderedDate,c.f.DISPAY_DATE_TIME_FORMAT,c.f.SYSTEM_DATE_TIME_FORMAT),expectedDeliveryDate:Z.E.convertDateTime(this.orderForm.value.expectedDeliveryDate,c.f.DISPAY_DATE_TIME_FORMAT,c.f.SYSTEM_DATE_TIME_FORMAT),createdOn:Z.E.currentDate(c.f.SYSTEM_DATE_TIME_FORMAT),createdBy:null===(t=this.chosenCustomer)||void 0===t?void 0:t.createdBy,modifiedOn:Z.E.currentDate(c.f.SYSTEM_DATE_TIME_FORMAT),modifiedBy:null===(n=this.chosenCustomer)||void 0===n?void 0:n.modifiedBy};null==p||null===(l=p.customer)||void 0===l||delete l.address,console.log(p),this.showSpinner=!0,this.newCreatedOrder=p,this.orderStore.orders.unshift(p),setTimeout(()=>{this.showSpinner=!1,this.orderCreated=!0},2e3)}else console.log("Create order form is invalid...")}customerSelectedEvent(t){var n,l,a,u,v,m,C,p,T,g,b,O,D,h;this.openSelectCustomer=!1,t&&(this.chosenCustomer=t,null===(n=this.orderForm.get("customerName"))||void 0===n||n.setValue(t.fullName),null===(l=this.orderForm.get("address"))||void 0===l||null===(l=l.get("addressOne"))||void 0===l||l.setValue(null===(a=t.address)||void 0===a?void 0:a.addressOne),null===(u=this.orderForm.get("address"))||void 0===u||null===(u=u.get("addressTwo"))||void 0===u||u.setValue(null===(v=t.address)||void 0===v?void 0:v.addressTwo),null===(m=this.orderForm.get("address"))||void 0===m||null===(m=m.get("city"))||void 0===m||m.setValue(null===(C=t.address)||void 0===C?void 0:C.city),null===(p=this.orderForm.get("address"))||void 0===p||null===(p=p.get("district"))||void 0===p||p.setValue(null===(T=t.address)||void 0===T?void 0:T.district),null===(g=this.orderForm.get("address"))||void 0===g||null===(g=g.get("state"))||void 0===g||g.setValue(null===(b=t.address)||void 0===b?void 0:b.state),null===(O=this.orderForm.get("address"))||void 0===O||null===(O=O.get("pinCode"))||void 0===O||O.setValue(null===(D=t.address)||void 0===D?void 0:D.pinCode),null===(h=this.orderForm.get("useCustomerAddress"))||void 0===h||h.enable()),this.selectCustomer.dismiss()}orderedDateChange(t){var n,l;null===(n=this.orderForm.get("orderedDate"))||void 0===n||n.setValue(y.ou.fromISO(null==t||null===(l=t.detail)||void 0===l?void 0:l.value).toFormat(c.f.DISPAY_DATE_TIME_FORMAT))}expectedDeliveryDateChange(t){var n,l;null===(n=this.orderForm.get("expectedDeliveryDate"))||void 0===n||n.setValue(y.ou.fromISO(null==t||null===(l=t.detail)||void 0===l?void 0:l.value).toFormat(c.f.DISPAY_DATE_TIME_FORMAT))}useCustomerAddressChange(t){var n,l,a,u,v,m,C,p,T,g,b,O,D,h,I,S,x,k,q,M,P,E,N,w,U;null!=t&&null!==(n=t.detail)&&void 0!==n&&n.checked?(this.hideAddress=!0,null===(l=this.orderForm.get("address"))||void 0===l||null===(l=l.get("addressOne"))||void 0===l||l.setValue(null===(a=this.chosenCustomer)||void 0===a||null===(a=a.address)||void 0===a?void 0:a.addressOne),null===(u=this.orderForm.get("address"))||void 0===u||null===(u=u.get("addressTwo"))||void 0===u||u.setValue(null===(v=this.chosenCustomer)||void 0===v||null===(v=v.address)||void 0===v?void 0:v.addressTwo),null===(m=this.orderForm.get("address"))||void 0===m||null===(m=m.get("city"))||void 0===m||m.setValue(null===(C=this.chosenCustomer)||void 0===C||null===(C=C.address)||void 0===C?void 0:C.city),null===(p=this.orderForm.get("address"))||void 0===p||null===(p=p.get("district"))||void 0===p||p.setValue(null===(T=this.chosenCustomer)||void 0===T||null===(T=T.address)||void 0===T?void 0:T.district),null===(g=this.orderForm.get("address"))||void 0===g||null===(g=g.get("state"))||void 0===g||g.setValue(null===(b=this.chosenCustomer)||void 0===b||null===(b=b.address)||void 0===b?void 0:b.state),null===(O=this.orderForm.get("address"))||void 0===O||null===(O=O.get("pinCode"))||void 0===O||O.setValue(null===(D=this.chosenCustomer)||void 0===D||null===(D=D.address)||void 0===D?void 0:D.pinCode),null===(h=this.orderForm.get("address"))||void 0===h||null===(h=h.get("addressOne"))||void 0===h||h.disable(),null===(I=this.orderForm.get("address"))||void 0===I||null===(I=I.get("addressTwo"))||void 0===I||I.disable(),null===(S=this.orderForm.get("address"))||void 0===S||null===(S=S.get("city"))||void 0===S||S.disable(),null===(x=this.orderForm.get("address"))||void 0===x||null===(x=x.get("district"))||void 0===x||x.disable(),null===(k=this.orderForm.get("address"))||void 0===k||null===(k=k.get("state"))||void 0===k||k.disable(),null===(q=this.orderForm.get("address"))||void 0===q||null===(q=q.get("pinCode"))||void 0===q||q.disable()):(this.hideAddress=!1,null===(M=this.orderForm.get("address"))||void 0===M||null===(M=M.get("addressOne"))||void 0===M||M.enable(),null===(P=this.orderForm.get("address"))||void 0===P||null===(P=P.get("addressTwo"))||void 0===P||P.enable(),null===(E=this.orderForm.get("address"))||void 0===E||null===(E=E.get("city"))||void 0===E||E.enable(),null===(N=this.orderForm.get("address"))||void 0===N||null===(N=N.get("district"))||void 0===N||N.enable(),null===(w=this.orderForm.get("address"))||void 0===w||null===(w=w.get("state"))||void 0===w||w.enable(),null===(U=this.orderForm.get("address"))||void 0===U||null===(U=U.get("pinCode"))||void 0===U||U.enable())}createAnotherOrder(){this.orderCreated=!1,this.newCreatedOrder=void 0,this.orderForm.reset(),this.ionViewWillEnter()}viewOrderDetails(){var t;this.router.navigate(["orders/"+(null===(t=this.newCreatedOrder)||void 0===t?void 0:t.id)])}openSelectCustomerPopup(){this.openSelectCustomer=!0}}return(r=s).\u0275fac=function(t){return new(t||r)(e.Y36(i.qu),e.Y36(G.k),e.Y36(Q.u),e.Y36(Y.i),e.Y36(_.F0))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-create-order"]],viewQuery:function(t,n){if(1&t&&e.Gf(V,7),2&t){let l;e.iGM(l=e.CRH())&&(n.selectCustomer=l.first)}},decls:11,vars:5,consts:[["pageName","Create Order"],["fullscreen","true"],[4,"ngIf","ngIfThen","ngIfElse"],["orderCreationSection",""],["orderCreatedSection",""],[3,"isOpen"],["selectCustomer",""],["message","Processing create order request",3,"isOpen"],[3,"formGroup","ngSubmit"],[3,"button","detail","click"],["labelPlacement","stacked","label","Name","formControlName","customerName","placeholder","Select Customer Name","readonly",""],["labelPlacement","stacked","label","Size","formControlName","size","placeholder","Provide Size","type","number"],["labelPlacement","stacked","label","Quantity","formControlName","quantity","placeholder","Provide Quantity","type","number"],["labelPlacement","stacked","label","GSM","formControlName","gsm","placeholder","Provide GSM","type","number"],["labelPlacement","stacked","label","Ordered Date","formControlName","orderedDate","placeholder","Select Ordered Date","readonly","","id","open-ordered-date-modal"],["fill","clear","slot","end"],["slot","icon-only","name","calendar-outline","aria-hidden","true"],["trigger","open-ordered-date-modal",3,"keepContentsMounted"],["labelPlacement","stacked","label","Expected Deliery Date","formControlName","expectedDeliveryDate","placeholder","Select Expected Deliery Date","readonly","","id","open-expected-delivery-date-modal"],["trigger","open-expected-delivery-date-modal",3,"keepContentsMounted"],["formControlName","useCustomerAddress",3,"ionChange"],["formGroupName","address",4,"ngIf"],["expand","block","type","submit",3,"disabled"],["locale","en-GB","hourCycle","h12","size","cover",3,"value","showDefaultButtons","showDefaultTitle","ionChange"],["formGroupName","address"],["labelPlacement","stacked","label","Address1","formControlName","addressOne","placeholder","Provide Address1"],["labelPlacement","stacked","label","Address2","formControlName","addressTwo","placeholder","Provide Address2"],["labelPlacement","stacked","label","City","formControlName","city","placeholder","Provide city"],["labelPlacement","stacked","label","District","formControlName","district","placeholder","Provide District"],["labelPlacement","stacked","label","State","formControlName","state","placeholder","Provide State"],["labelPlacement","stacked","label","Pin Code","formControlName","pinCode","placeholder","Provide Pin Code","type","number",3,"maxlength"],["fill","solid","expand","block",3,"click"],["title","Select Customers",1,"ion-page",3,"customers","selectedCustomer","selectionChange","selectionCancel"]],template:function(t,n){if(1&t&&(e._UZ(0,"app-header",0),e.TgZ(1,"ion-content",1),e.YNc(2,H,1,0,"div",2)(3,j,27,7,"ng-template",null,3,e.W1O)(5,X,11,1,"ng-template",null,4,e.W1O),e.qZA(),e.TgZ(7,"ion-modal",5,6),e.YNc(9,F,1,2,"ng-template"),e.qZA(),e._UZ(10,"ion-loading",7)),2&t){const l=e.MAs(4),a=e.MAs(6);e.xp6(2),e.Q6J("ngIf",n.orderCreated)("ngIfThen",a)("ngIfElse",l),e.xp6(5),e.Q6J("isOpen",n.openSelectCustomer),e.xp6(3),e.Q6J("isOpen",n.showSpinner)}},dependencies:[A.O5,i._Y,i.JJ,i.JL,i.nD,d.YG,d.PM,d.FN,d.W2,d.x4,d.jY,d.gu,d.pK,d.Ie,d.wh,d.ho,d.ki,d.w,d.as,d.QI,d.j9,R.G,i.sg,i.u,i.x0,B],styles:["#box[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translateY(-50%) translate(-50%);z-index:100;display:flex;align-items:center;justify-content:center;background:var(--ion-background-color, #fff);width:90%;height:100px;border-radius:10px}"]}),s})();function ee(r,s){if(1&r){const o=e.EpF();e.TgZ(0,"ion-content")(1,"ion-datetime",31),e.NdJ("ionChange",function(n){e.CHM(o);const l=e.oxw(2);return e.KtG(l.deliveredDateChange(n))}),e.qZA()()}if(2&r){const o=e.oxw(2);e.xp6(1),e.Q6J("value",o.todayOrderDate)("showDefaultButtons",!0)("showDefaultTitle",!0)}}function te(r,s){1&r&&(e.TgZ(0,"ion-item"),e._UZ(1,"ion-input",27),e.TgZ(2,"ion-button",28),e._UZ(3,"ion-icon",29),e.qZA(),e.TgZ(4,"ion-modal",30),e.YNc(5,ee,2,3,"ng-template"),e.qZA()()),2&r&&(e.xp6(4),e.Q6J("keepContentsMounted",!0))}let ne=(()=>{var r;class s{constructor(t,n,l,a){this.formBuilder=t,this.ordersStore=n,this.activatedRoute=l,this.router=a,this.defaultHref="orders/report",this.todayOrderDate=y.ou.now(),this.showSpinner=!1}ngOnInit(){this.orderDetailsForm=this.formBuilder.group({customerName:["",[i.kI.required]],gst:["",[i.kI.required]],size:["",i.kI.required],quantity:["",i.kI.required],gsm:["",i.kI.required],address:this.formBuilder.group({addressOne:["",i.kI.required],addressTwo:["",i.kI.required],city:["",i.kI.required],district:["",i.kI.required],state:["",i.kI.required],pinCode:["",i.kI.required]}),status:["",i.kI.required],createdDate:["",i.kI.required],orderedDate:["",i.kI.required],expectedDeliveryDate:["",[i.kI.required]],deliveredDate:["",i.kI.required]})}ionViewWillEnter(){const t=this.activatedRoute.snapshot.paramMap.get("id");t&&!Number.isNaN(t)&&this.ordersStore.orders&&(this.selectedOrder=this.ordersStore.orders.find(n=>n.id===+t),this.selectedOrder?this.orderDetailsForm=this.formBuilder.group({customerName:[{value:this.selectedOrder.customer.firstName+" "+this.selectedOrder.customer.lastName,disabled:!0},[i.kI.required]],gst:[{value:this.selectedOrder.customer.gstNumber,disabled:!0},[i.kI.required]],size:[this.selectedOrder.size,i.kI.required],quantity:[this.selectedOrder.quantity,i.kI.required],gsm:[this.selectedOrder.gsm,i.kI.required],address:this.formBuilder.group({addressOne:[{value:this.selectedOrder.address.addressOne,disabled:!0},[i.kI.required]],addressTwo:[{value:this.selectedOrder.address.addressTwo,disabled:!0},i.kI.required],city:[{value:this.selectedOrder.address.city,disabled:!0},i.kI.required],district:[{value:this.selectedOrder.address.district,disabled:!0},i.kI.required],state:[{value:this.selectedOrder.address.state,disabled:!0},i.kI.required],pinCode:[{value:this.selectedOrder.address.pinCode,disabled:!0},i.kI.required]}),status:[this.selectedOrder.status.toLowerCase(),[i.kI.required]],createdDate:[{value:Z.E.convertDateTime(this.selectedOrder.createdOn,c.f.SYSTEM_DATE_TIME_FORMAT,c.f.DISPAY_DATE_TIME_FORMAT),disabled:!0},i.kI.required],orderedDate:[{value:Z.E.convertDateTime(this.selectedOrder.orderedDate,c.f.SYSTEM_DATE_TIME_FORMAT,c.f.DISPAY_DATE_TIME_FORMAT),disabled:!0},i.kI.required],expectedDeliveryDate:[{value:Z.E.convertDateTime(this.selectedOrder.expectedDeliveryDate,c.f.SYSTEM_DATE_TIME_FORMAT,c.f.DISPAY_DATE_TIME_FORMAT),disabled:!0},[i.kI.required]],deliveredDate:[{value:this.todayOrderDate.toFormat(c.f.DISPAY_DATE_TIME_FORMAT),disabled:!1}]}):console.log("order not available")),this.selectedOrder||this.router.navigate(["orders/report"])}deliveredDateChange(t){var n,l;null===(n=this.orderDetailsForm.get("deliveredDate"))||void 0===n||n.setValue(y.ou.fromISO(null==t||null===(l=t.detail)||void 0===l?void 0:l.value).toFormat(c.f.DISPAY_DATE_TIME_FORMAT))}orderStatusChanged(t){var n,l;"delivered"===(null==t?void 0:t.detail.valeu)?null===(n=this.orderDetailsForm.get("deliveredDate"))||void 0===n||n.addValidators(i.kI.required):null===(l=this.orderDetailsForm.get("deliveredDate"))||void 0===l||l.removeValidators(i.kI.required)}updateOrderDetails(){if(this.orderDetailsForm.valid){var t,n,l,a;let u=this.ordersStore.orders.findIndex(v=>v.id===this.selectedOrder.id);this.ordersStore.orders[u].status=null===(t=this.orderDetailsForm.get("status"))||void 0===t?void 0:t.value.toUpperCase(),this.ordersStore.orders[u].size=null===(n=this.orderDetailsForm.get("size"))||void 0===n?void 0:n.value,this.ordersStore.orders[u].quantity=null===(l=this.orderDetailsForm.get("quantity"))||void 0===l?void 0:l.value,this.ordersStore.orders[u].gsm=null===(a=this.orderDetailsForm.get("gsm"))||void 0===a?void 0:a.value,this.ordersStore.orders[u].deliveredDate=Z.E.convertDateTime(this.orderDetailsForm.value.deliveredDate,c.f.DISPAY_DATE_TIME_FORMAT,c.f.SYSTEM_DATE_TIME_FORMAT),this.showSpinner=!0,setTimeout(()=>{this.showSpinner=!1,setTimeout(()=>{this.router.navigate(["orders/report"])},100)},2e3)}}}return(r=s).\u0275fac=function(t){return new(t||r)(e.Y36(i.qu),e.Y36(Y.i),e.Y36(_.gz),e.Y36(_.F0))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-order-details"]],decls:48,vars:6,consts:[[3,"translucent"],["slot","start"],["text","",3,"defaultHref"],["fullscreen","true"],[3,"formGroup","ngSubmit"],["labelPlacement","stacked","label","Name","formControlName","customerName","readonly","true","placeholder","Provide Name"],["labelPlacement","stacked","label","GST","formControlName","gst","readonly","true","placeholder","Provide GST"],["labelPlacement","stacked","label","Creation Date","formControlName","createdDate","readonly","true","placeholder","Provide Created Date"],["labelPlacement","stacked","label","Ordered Date","formControlName","orderedDate","readonly","true","placeholder","Provide Ordered Date"],["labelPlacement","stacked","label","Expected Delivery Date","formControlName","expectedDeliveryDate","readonly","true","placeholder","Provide Expected Delivery Date"],["labelPlacement","stacked","label","Size","formControlName","size","placeholder","Provide Size","type","number"],["labelPlacement","stacked","label","Quantity","formControlName","quantity","placeholder","Provide Quantity","type","number"],["labelPlacement","stacked","label","GSM","formControlName","gsm","placeholder","Provide GSM","type","number"],["labelPlacement","stacked","label","Order Status","placeholder","Select Order Status","formControlName","status",3,"ionChange"],["orderStatus",""],["value","ordered"],["value","delivered"],[4,"ngIf"],["formGroupName","address"],["labelPlacement","stacked","label","Address1","formControlName","addressOne","placeholder","Provide Address1","readonly",""],["labelPlacement","stacked","label","Address2","formControlName","addressTwo","placeholder","Provide Address2","readonly",""],["labelPlacement","stacked","label","City","formControlName","city","placeholder","Provide city","readonly",""],["labelPlacement","stacked","label","District","formControlName","district","placeholder","Provide District","readonly",""],["labelPlacement","stacked","label","State","formControlName","state","placeholder","Provide State","readonly",""],["labelPlacement","stacked","label","Pin Code","formControlName","pinCode","placeholder","Provide Pin Code","type","number","readonly",""],["expand","block","type","submit",3,"disabled"],["message","Processing update order request",3,"isOpen"],["labelPlacement","stacked","label","Delivered Date","formControlName","deliveredDate","placeholder","Select Delivered Date","readonly","","id","open-delivered-date-modal"],["fill","clear","slot","end"],["slot","icon-only","name","calendar-outline","aria-hidden","true"],["trigger","open-delivered-date-modal",3,"keepContentsMounted"],["locale","en-GB","hourCycle","h12",3,"value","showDefaultButtons","showDefaultTitle","ionChange"]],template:function(t,n){if(1&t&&(e.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1),e._UZ(3,"ion-back-button",2),e.qZA(),e.TgZ(4,"ion-title"),e._uU(5," Order Details "),e.qZA()()(),e.TgZ(6,"ion-content",3)(7,"form",4),e.NdJ("ngSubmit",function(){return n.updateOrderDetails()}),e.TgZ(8,"ion-item"),e._UZ(9,"ion-input",5),e.qZA(),e.TgZ(10,"ion-item"),e._UZ(11,"ion-input",6),e.qZA(),e.TgZ(12,"ion-item"),e._UZ(13,"ion-input",7),e.qZA(),e.TgZ(14,"ion-item"),e._UZ(15,"ion-input",8),e.qZA(),e.TgZ(16,"ion-item"),e._UZ(17,"ion-input",9),e.qZA(),e.TgZ(18,"ion-item"),e._UZ(19,"ion-input",10),e.qZA(),e.TgZ(20,"ion-item"),e._UZ(21,"ion-input",11),e.qZA(),e.TgZ(22,"ion-item"),e._UZ(23,"ion-input",12),e.qZA(),e.TgZ(24,"ion-item")(25,"ion-select",13,14),e.NdJ("ionChange",function(a){return n.orderStatusChanged(a)}),e.TgZ(27,"ion-select-option",15),e._uU(28,"Ordered"),e.qZA(),e.TgZ(29,"ion-select-option",16),e._uU(30,"Delivered"),e.qZA()()(),e.YNc(31,te,6,1,"ion-item",17),e.TgZ(32,"ion-grid",18)(33,"ion-item"),e._UZ(34,"ion-input",19),e.qZA(),e.TgZ(35,"ion-item"),e._UZ(36,"ion-input",20),e.qZA(),e.TgZ(37,"ion-item"),e._UZ(38,"ion-input",21),e.qZA(),e.TgZ(39,"ion-item"),e._UZ(40,"ion-input",22),e.qZA(),e.TgZ(41,"ion-item"),e._UZ(42,"ion-input",23),e.qZA(),e.TgZ(43,"ion-item"),e._UZ(44,"ion-input",24),e.qZA()(),e.TgZ(45,"ion-button",25),e._uU(46," Update Order "),e.qZA()()(),e._UZ(47,"ion-loading",26)),2&t){const l=e.MAs(26);e.Q6J("translucent",!0),e.xp6(3),e.Q6J("defaultHref",n.defaultHref),e.xp6(4),e.Q6J("formGroup",n.orderDetailsForm),e.xp6(24),e.Q6J("ngIf","delivered"===l.value),e.xp6(14),e.Q6J("disabled",!n.orderDetailsForm.valid),e.xp6(2),e.Q6J("isOpen",n.showSpinner)}},dependencies:[A.O5,i._Y,i.JJ,i.JL,d.YG,d.Sm,d.W2,d.x4,d.jY,d.Gu,d.gu,d.pK,d.Ie,d.wh,d.t9,d.n0,d.wd,d.sr,d.ki,d.as,d.QI,d.j9,d.oU,i.sg,i.u,i.x0]}),s})();function re(r,s){if(1&r&&(e.TgZ(0,"ion-item",5)(1,"ion-label"),e.ALo(2,"lowercase"),e.TgZ(3,"h4",6),e._uU(4),e.qZA(),e.TgZ(5,"h4"),e._uU(6),e.qZA(),e.TgZ(7,"ion-text",6),e._uU(8),e.ALo(9,"date"),e.qZA(),e.TgZ(10,"p"),e._uU(11),e.ALo(12,"titlecase"),e.qZA()()()),2&r){const o=s.$implicit;e.MGl("routerLink","/orders/",o.id,""),e.xp6(1),e.Gre("ion-label-",e.lcZ(2,10,o.status),""),e.xp6(3),e.lnq(" (S):",o.size," \u2013 (Q):",o.quantity," \u2013 (G):",o.gsm," "),e.xp6(2),e.hij(" ",o.customer.firstName+" "+o.customer.lastName," "),e.xp6(2),e.hij(" ",e.xi3(9,12,"ordered"===o.status.toLowerCase()?o.expectedDeliveryDate:o.deliveredDate,"medium")," "),e.xp6(3),e.hij(" ",e.lcZ(12,15,o.status)," ")}}const le=[{path:"",component:(()=>{var r;class s{constructor(){}ngOnInit(){console.log("Order Page called")}}return(r=s).\u0275fac=function(t){return new(t||r)},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-orders"]],decls:9,vars:0,consts:[["slot","bottom"],["tab","create"],["name","create-outline"],["tab","report"],["name","document-text-outline"]],template:function(t,n){1&t&&(e._UZ(0,"ion-router-outlet"),e.TgZ(1,"ion-tabs")(2,"ion-tab-bar",0)(3,"ion-tab-button",1),e._UZ(4,"ion-icon",2),e._uU(5," Place Order "),e.qZA(),e.TgZ(6,"ion-tab-button",3),e._UZ(7,"ion-icon",4),e._uU(8," Order Reports "),e.qZA()()())},dependencies:[d.gu,d.yq,d.ZU,d.UN,d.jP]}),s})(),children:[{path:"create",component:$},{path:"report",component:(()=>{var r;class s{constructor(t){this.orderStore=t}ngOnInit(){console.log("Order report called")}ionViewWillEnter(){this.getOrders()}getOrders(){this.orders=this.orderStore.orders}orderClick(t){console.log(t)}}return(r=s).\u0275fac=function(t){return new(t||r)(e.Y36(Y.i))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-orders-report"]],decls:7,vars:1,consts:[["pageName","Orders Report"],["fullscreen","true"],["slot","start",3,"routerLink",4,"ngFor","ngForOf"],["slot","fixed","vertical","bottom","horizontal","end"],["name","funnel-outline"],["slot","start",3,"routerLink"],[1,"ion-text-end","ion-float-right"]],template:function(t,n){1&t&&(e._UZ(0,"app-header",0),e.TgZ(1,"ion-content",1)(2,"ion-list"),e.YNc(3,re,13,17,"ion-item",2),e.qZA(),e.TgZ(4,"ion-fab",3)(5,"ion-fab-button"),e._UZ(6,"ion-icon",4),e.qZA()()()),2&t&&(e.xp6(3),e.Q6J("ngForOf",n.orders))},dependencies:[A.sg,d.W2,d.IJ,d.W4,d.gu,d.Ie,d.Q$,d.q_,d.yW,d.YI,_.rH,R.G,A.i8,A.rS,A.uU],styles:[".ion-label-delivered[_ngcontent-%COMP%]{border-left:3px solid var(--ion-color-success);padding-left:3px}.ion-label-ordered[_ngcontent-%COMP%]{border-left:3px solid var(--ion-color-warning);padding-left:3px}.ion-label-others[_ngcontent-%COMP%]{border-left:3px solid var(--ion-color-danger);padding-left:3px}ion-text[_ngcontent-%COMP%]{color:var(--ion-color-primary)}"]}),s})()},{path:":id",component:ne},{path:"",redirectTo:"report",pathMatch:"full"}]}];let oe=(()=>{var r;class s{}return(r=s).\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[_.Bz.forChild(le),_.Bz]}),s})();var ie=f(6208);let de=(()=>{var r;class s{}return(r=s).\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[A.ez,i.u5,d.Pc,oe,ie.m]}),s})()}}]);