"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[56],{56:(R,k,u)=>{u.r(k),u.d(k,{CustomersPageModule:()=>Y});var S=u(6814),r=u(95),i=u(3800),b=u(2436),e=u(5678);let x=(()=>{var o;class d{constructor(){}ngOnInit(){console.log("customer page loaded..")}}return(o=d).\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-customers"]],decls:9,vars:0,consts:[["slot","bottom"],["tab","create"],["name","person-add-outline"],["tab","report"],["name","people-outline"]],template:function(t,n){1&t&&(e._UZ(0,"ion-router-outlet"),e.TgZ(1,"ion-tabs")(2,"ion-tab-bar",0)(3,"ion-tab-button",1),e._UZ(4,"ion-icon",2),e._uU(5," Add Customer "),e.qZA(),e.TgZ(6,"ion-tab-button",3),e._UZ(7,"ion-icon",4),e._uU(8," Customer Reports "),e.qZA()()())},dependencies:[i.gu,i.yq,i.ZU,i.UN,i.jP]}),d})();var Z=u(8380),N=u(7906),I=u(3289),A=u(2370),U=u(4429),P=u(74);let q=(()=>{var o;class d{constructor(t){this.el=t,this.element=t.nativeElement}onInput(t){this.element.value=this.element.value.toUpperCase()}}return(o=d).\u0275fac=function(t){return new(t||o)(e.Y36(e.SBq))},o.\u0275dir=e.lG2({type:o,selectors:[["","appUpperCase",""]],hostBindings:function(t,n){1&t&&e.NdJ("input",function(){return n.onInput()})("change",function(){return n.onInput()})}}),d})();function F(o,d){1&o&&e._UZ(0,"div")}function y(o,d){if(1&o){const s=e.EpF();e.TgZ(0,"form",6),e.NdJ("ngSubmit",function(){e.CHM(s);const n=e.oxw();return e.KtG(n.onSubmit())}),e.TgZ(1,"ion-item"),e._UZ(2,"ion-input",7),e.qZA(),e.TgZ(3,"ion-item"),e._UZ(4,"ion-input",8),e.qZA(),e.TgZ(5,"ion-item"),e._UZ(6,"ion-input",9),e.qZA(),e.TgZ(7,"ion-item"),e._UZ(8,"ion-input",10),e.qZA(),e.TgZ(9,"ion-grid",11)(10,"ion-item"),e._UZ(11,"ion-input",12),e.qZA(),e.TgZ(12,"ion-item"),e._UZ(13,"ion-input",13),e.qZA(),e.TgZ(14,"ion-item"),e._UZ(15,"ion-input",14),e.qZA(),e.TgZ(16,"ion-item"),e._UZ(17,"ion-input",15),e.qZA(),e.TgZ(18,"ion-item"),e._UZ(19,"ion-input",16),e.qZA(),e.TgZ(20,"ion-item"),e._UZ(21,"ion-input",17),e.qZA()(),e.TgZ(22,"ion-button",18),e._uU(23," Create Order "),e.qZA()()}if(2&o){const s=e.oxw();e.Q6J("formGroup",s.customerCreateForm),e.xp6(6),e.Q6J("maxlength",15),e.xp6(2),e.Q6J("maxlength",10),e.xp6(13),e.Q6J("maxlength",6),e.xp6(1),e.Q6J("disabled",!s.customerCreateForm.valid)}}function _(o,d){if(1&o){const s=e.EpF();e.TgZ(0,"ion-card")(1,"ion-card-content")(2,"h2"),e._uU(3,"Customer has been created successfully with id: "),e.TgZ(4,"strong"),e._uU(5),e.qZA()()(),e.TgZ(6,"ion-button",19),e.NdJ("click",function(){e.CHM(s);const n=e.oxw();return e.KtG(n.viewCustomerDetails())}),e._uU(7,"View Customers"),e.qZA(),e._UZ(8,"br"),e.TgZ(9,"ion-button",19),e.NdJ("click",function(){e.CHM(s);const n=e.oxw();return e.KtG(n.createAnotherCustomer())}),e._uU(10,"Create New Customer"),e.qZA()()}if(2&o){const s=e.oxw();e.xp6(5),e.Oqu(null==s.newCreatedCustomer?null:s.newCreatedCustomer.id)}}function O(o,d){if(1&o){const s=e.EpF();e.TgZ(0,"ion-col",3)(1,"ion-card",4),e.NdJ("click",function(){const a=e.CHM(s).$implicit,l=e.oxw();return e.KtG(l.showCustomerDetails(a))}),e.TgZ(2,"ion-row")(3,"ion-col")(4,"ion-text")(5,"h5"),e._uU(6),e.qZA(),e.TgZ(7,"h5"),e._uU(8),e.qZA(),e.TgZ(9,"h5"),e._uU(10),e._UZ(11,"br"),e.TgZ(12,"ion-text",5),e._UZ(13,"ion-icon",6),e._uU(14),e.qZA()()()()()()()}if(2&o){const s=d.$implicit;e.xp6(6),e.Oqu(s.fullName),e.xp6(2),e.hij("GST: ",s.gstNumber,""),e.xp6(2),e.xDo(" ",null==s.address?null:s.address.addressOne,", ",null!=s.address&&s.address.addressTwo?(null==s.address?null:s.address.addressTwo)+",":""," ",null==s.address?null:s.address.city,", ",null==s.address?null:s.address.district,", ",null==s.address?null:s.address.state,". "),e.xp6(4),e.hij(" ",s.phoneNumber,"")}}const M=[{path:"",component:x,children:[{path:"create",component:(()=>{var o;class d{constructor(t,n,a,l,c){this.formBuilder=t,this.addressesStore=n,this.loginUserStore=a,this.customerStore=l,this.router=c,this.customerCreated=!1,this.showSpinner=!1}ngOnInit(){this.initializeForm()}ionViewWillEnter(){this.customerCreated=!1,this.newCreatedCustomer=void 0,this.initializeForm()}initializeForm(){this.customerCreateForm=this.formBuilder.group({firstName:["",[r.kI.required]],lastName:["",[r.kI.required]],gstNumber:["",[r.kI.required]],phoneNumber:["",[r.kI.required,r.kI.pattern("^((\\+91-?)|0)?[0-9]{10}$")]],address:this.formBuilder.group({addressOne:["",r.kI.required],addressTwo:["",r.kI.required],city:["",r.kI.required],district:["",r.kI.required],state:["",r.kI.required],pinCode:["",[r.kI.required,r.kI.minLength(6),r.kI.maxLength(6)]]})})}onSubmit(){if(this.customerCreateForm.valid){let t={id:Math.max(...this.customerStore.customers.map(a=>a.id))+1,firstName:this.customerCreateForm.value.firstName,lastName:this.customerCreateForm.value.lastName,gstNumber:this.customerCreateForm.value.gstNumber,phoneNumber:this.customerCreateForm.value.phoneNumber,createdOn:N.E.currentDate(Z.f.SYSTEM_DATE_TIME_FORMAT),createdBy:this.loginUserStore.loggedInUser.id,modifiedOn:N.E.currentDate(Z.f.SYSTEM_DATE_TIME_FORMAT),modifiedBy:this.loginUserStore.loggedInUser.id},n={id:Math.max(...this.addressesStore.addresses.map(a=>a.id))+1,addressOne:this.customerCreateForm.value.address.addressOne,addressTwo:this.customerCreateForm.value.address.addressTwo,city:this.customerCreateForm.value.address.city,district:this.customerCreateForm.value.address.district,state:this.customerCreateForm.value.address.state,country:"IN",addressType:"CUSTOMER",customerId:t.id,pinCode:this.customerCreateForm.value.address.pinCode,createdOn:N.E.currentDate(Z.f.SYSTEM_DATE_TIME_FORMAT),createdBy:this.loginUserStore.loggedInUser.id,modifiedOn:N.E.currentDate(Z.f.SYSTEM_DATE_TIME_FORMAT),modifiedBy:this.loginUserStore.loggedInUser.id};this.newCreatedCustomer=t,this.customerStore.customers.unshift(t),this.addressesStore.addresses.unshift(n),this.showSpinner=!0,setTimeout(()=>{this.showSpinner=!1,this.customerCreated=!0},2e3),console.log(n),console.log(t)}}viewCustomerDetails(){this.router.navigate(["customers/report"])}createAnotherCustomer(){this.customerCreated=!1,this.newCreatedCustomer=void 0,this.customerCreateForm.reset(),this.ionViewWillEnter()}}return(o=d).\u0275fac=function(t){return new(t||o)(e.Y36(r.qu),e.Y36(I.u),e.Y36(A.k),e.Y36(U.k),e.Y36(b.F0))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-create-customer"]],decls:8,vars:4,consts:[["pageName","Create Customer"],["fullscreen","true"],[4,"ngIf","ngIfThen","ngIfElse"],["customerCreationSection",""],["customerCreatedSection",""],["message","Processing create customer request",3,"isOpen"],[3,"formGroup","ngSubmit"],["labelPlacement","stacked","label","First Name","formControlName","firstName","placeholder","Provide First Name"],["labelPlacement","stacked","label","Last Name","formControlName","lastName","placeholder","Provide Second Name"],["labelPlacement","stacked","label","GST Number","formControlName","gstNumber","placeholder","Provide GST","appUpperCase","",3,"maxlength"],["labelPlacement","stacked","label","Phone Number","formControlName","phoneNumber","placeholder","Provide Phone Number","type","number",3,"maxlength"],["formGroupName","address"],["labelPlacement","stacked","label","Address1","formControlName","addressOne","placeholder","Provide Address1"],["labelPlacement","stacked","label","Address2","formControlName","addressTwo","placeholder","Provide Address2"],["labelPlacement","stacked","label","City","formControlName","city","placeholder","Provide city"],["labelPlacement","stacked","label","District","formControlName","district","placeholder","Provide District"],["labelPlacement","stacked","label","State","formControlName","state","placeholder","Provide State"],["labelPlacement","stacked","label","Pin Code","formControlName","pinCode","placeholder","Provide Pin Code","type","number",3,"maxlength"],["expand","block","type","submit",3,"disabled"],["fill","solid","expand","block",3,"click"]],template:function(t,n){if(1&t&&(e._UZ(0,"app-header",0),e.TgZ(1,"ion-content",1),e.YNc(2,F,1,0,"div",2)(3,y,24,5,"ng-template",null,3,e.W1O)(5,_,11,1,"ng-template",null,4,e.W1O),e.qZA(),e._UZ(7,"ion-loading",5)),2&t){const a=e.MAs(4),l=e.MAs(6);e.xp6(2),e.Q6J("ngIf",n.customerCreated)("ngIfThen",l)("ngIfElse",a),e.xp6(5),e.Q6J("isOpen",n.showSpinner)}},dependencies:[S.O5,r._Y,r.JJ,r.JL,r.nD,i.YG,i.PM,i.FN,i.W2,i.jY,i.pK,i.Ie,i.wh,i.as,i.j9,P.G,r.sg,r.u,r.x0,q]}),d})()},{path:"report",component:(()=>{var o;class d{constructor(t,n,a){this.customerStore=t,this.addressesStore=n,this.router=a}ngOnInit(){console.log("customer report loaded..")}ionViewWillEnter(){var t,n;this.customers=[];let a=new Map;null===(t=this.addressesStore.addresses)||void 0===t||t.forEach(l=>{"CUSTOMER"===l.addressType&&a.set(l.customerId,l)}),null===(n=this.customerStore.customers)||void 0===n||n.forEach(l=>{l.address=a.get(l.id),l.fullName=l.firstName+" "+l.lastName}),this.customers=this.customerStore.customers}showCustomerDetails(t){this.router.navigate(["customers/"+t.id])}}return(o=d).\u0275fac=function(t){return new(t||o)(e.Y36(U.k),e.Y36(I.u),e.Y36(b.F0))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-customers-report"]],decls:5,vars:1,consts:[["pageName","Customers Report"],["fullscreen","true"],["size","12","size-md","6",4,"ngFor","ngForOf"],["size","12","size-md","6"],["button","","detail","true",3,"click"],["color","secondary"],["name","call-outline"]],template:function(t,n){1&t&&(e._UZ(0,"app-header",0),e.TgZ(1,"ion-content",1)(2,"ion-grid")(3,"ion-row"),e.YNc(4,O,15,8,"ion-col",2),e.qZA()()()),2&t&&(e.xp6(4),e.Q6J("ngForOf",n.customers))},dependencies:[S.sg,i.PM,i.wI,i.W2,i.jY,i.gu,i.Nd,i.yW,P.G],styles:["ion-card[_ngcontent-%COMP%]{margin:5px}"]}),d})()},{path:":id",component:(()=>{var o;class d{constructor(t,n,a,l,c){this.addressesStore=t,this.customerStore=n,this.activatedRoute=a,this.router=l,this.formBuilder=c,this.defaultHref="customers/report",this.showSpinner=!1}ngOnInit(){this.customerDetailsForm=this.formBuilder.group({firstName:["",[r.kI.required]],lastName:["",[r.kI.required]],gstNumber:["",[r.kI.required,r.kI.minLength(15),r.kI.maxLength(15)]],phoneNumber:["",[r.kI.required,r.kI.pattern("^((\\+91-?)|0)?[0-9]{10}$")]],address:this.formBuilder.group({addressOne:["",r.kI.required],addressTwo:["",r.kI.required],city:["",r.kI.required],district:["",r.kI.required],state:["",r.kI.required],pinCode:["",[r.kI.required,r.kI.minLength(6),r.kI.maxLength(6)]]})})}ionViewWillEnter(){var t,n;let a=new Map;null===(t=this.addressesStore.addresses)||void 0===t||t.forEach(m=>{"CUSTOMER"===m.addressType&&a.set(m.customerId,m)}),null===(n=this.customerStore.customers)||void 0===n||n.forEach(m=>{m.address=a.get(m.id),m.fullName=m.firstName+" "+m.lastName});const l=this.activatedRoute.snapshot.paramMap.get("id");if(l&&!Number.isNaN(l)&&this.customerStore.customers)if(this.selectedCustomer=this.customerStore.customers.find(m=>m.id===+l),this.selectedCustomer){var c,p,g,C,h,f;this.customerDetailsForm=this.formBuilder.group({firstName:[this.selectedCustomer.firstName,[r.kI.required]],lastName:[this.selectedCustomer.lastName,[r.kI.required]],gstNumber:[this.selectedCustomer.gstNumber,[r.kI.required]],phoneNumber:[this.selectedCustomer.phoneNumber,[r.kI.required,r.kI.pattern("^((\\+91-?)|0)?[0-9]{10}$")]],address:this.formBuilder.group({addressOne:[null===(c=this.selectedCustomer.address)||void 0===c?void 0:c.addressOne,r.kI.required],addressTwo:[null===(p=this.selectedCustomer.address)||void 0===p?void 0:p.addressTwo,r.kI.required],city:[null===(g=this.selectedCustomer.address)||void 0===g?void 0:g.city,r.kI.required],district:[null===(C=this.selectedCustomer.address)||void 0===C?void 0:C.district,r.kI.required],state:[null===(h=this.selectedCustomer.address)||void 0===h?void 0:h.state,r.kI.required],pinCode:[null===(f=this.selectedCustomer.address)||void 0===f?void 0:f.pinCode,[r.kI.required,r.kI.minLength(6),r.kI.maxLength(6)]]})}),this.customerDetailsForm.markAsTouched()}else console.log("Customer not available");this.selectedCustomer||this.router.navigate(["customers/report"])}onSubmit(){if(this.customerDetailsForm.valid){var t,n,a,l,c,p,g,C,h,f;let m=this.customerStore.customers.findIndex(T=>T.id===this.selectedCustomer.id),v=this.addressesStore.addresses.findIndex(T=>T.customerId===this.selectedCustomer.id&&"CUSTOMER"===T.addressType);this.customerStore.customers[m].firstName=null===(t=this.customerDetailsForm.get("firstName"))||void 0===t?void 0:t.value,this.customerStore.customers[m].lastName=null===(n=this.customerDetailsForm.get("lastName"))||void 0===n?void 0:n.value,this.customerStore.customers[m].gstNumber=null===(a=this.customerDetailsForm.get("gstNumber"))||void 0===a?void 0:a.value.toUpperCase(),this.customerStore.customers[m].phoneNumber=null===(l=this.customerDetailsForm.get("phoneNumber"))||void 0===l?void 0:l.value,this.addressesStore.addresses[v].addressOne=null===(c=this.customerDetailsForm.get("address"))||void 0===c||null===(c=c.get("addressOne"))||void 0===c?void 0:c.value,this.addressesStore.addresses[v].addressTwo=null===(p=this.customerDetailsForm.get("address"))||void 0===p||null===(p=p.get("addressTwo"))||void 0===p?void 0:p.value,this.addressesStore.addresses[v].city=null===(g=this.customerDetailsForm.get("address"))||void 0===g||null===(g=g.get("city"))||void 0===g?void 0:g.value,this.addressesStore.addresses[v].district=null===(C=this.customerDetailsForm.get("address"))||void 0===C||null===(C=C.get("district"))||void 0===C?void 0:C.value,this.addressesStore.addresses[v].state=null===(h=this.customerDetailsForm.get("address"))||void 0===h||null===(h=h.get("state"))||void 0===h?void 0:h.value,this.addressesStore.addresses[v].pinCode=null===(f=this.customerDetailsForm.get("address"))||void 0===f||null===(f=f.get("pinCode"))||void 0===f?void 0:f.value,console.log(this.addressesStore.addresses[v]),this.showSpinner=!0,setTimeout(()=>{this.showSpinner=!1,setTimeout(()=>{this.router.navigate(["customers/report"])},100)},2e3)}}}return(o=d).\u0275fac=function(t){return new(t||o)(e.Y36(I.u),e.Y36(U.k),e.Y36(b.gz),e.Y36(b.F0),e.Y36(r.qu))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-customer-details"]],decls:32,vars:7,consts:[[3,"translucent"],["slot","start"],["text","",3,"defaultHref"],["fullscreen","true"],[3,"formGroup","ngSubmit"],["labelPlacement","stacked","label","First Name","formControlName","firstName","placeholder","Provide First Name"],["labelPlacement","stacked","label","Last Name","formControlName","lastName","placeholder","Provide Second Name"],["labelPlacement","stacked","label","GST Number","formControlName","gstNumber","placeholder","Provide GST","appUpperCase","",3,"maxlength"],["labelPlacement","stacked","label","Phone Number","formControlName","phoneNumber","placeholder","Provide Phone Number","type","number",3,"maxlength"],["formGroupName","address"],["labelPlacement","stacked","label","Address1","formControlName","addressOne","placeholder","Provide Address1"],["labelPlacement","stacked","label","Address2","formControlName","addressTwo","placeholder","Provide Address2"],["labelPlacement","stacked","label","City","formControlName","city","placeholder","Provide city"],["labelPlacement","stacked","label","District","formControlName","district","placeholder","Provide District"],["labelPlacement","stacked","label","State","formControlName","state","placeholder","Provide State"],["labelPlacement","stacked","label","Pin Code","formControlName","pinCode","placeholder","Provide Pin Code","type","number"],["expand","block","type","submit",3,"disabled"],["message","Processing update customer request",3,"isOpen"]],template:function(t,n){1&t&&(e.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1),e._UZ(3,"ion-back-button",2),e.qZA(),e.TgZ(4,"ion-title"),e._uU(5," Customer Details "),e.qZA()()(),e.TgZ(6,"ion-content",3)(7,"form",4),e.NdJ("ngSubmit",function(){return n.onSubmit()}),e.TgZ(8,"ion-item"),e._UZ(9,"ion-input",5),e.qZA(),e.TgZ(10,"ion-item"),e._UZ(11,"ion-input",6),e.qZA(),e.TgZ(12,"ion-item"),e._UZ(13,"ion-input",7),e.qZA(),e.TgZ(14,"ion-item"),e._UZ(15,"ion-input",8),e.qZA(),e.TgZ(16,"ion-grid",9)(17,"ion-item"),e._UZ(18,"ion-input",10),e.qZA(),e.TgZ(19,"ion-item"),e._UZ(20,"ion-input",11),e.qZA(),e.TgZ(21,"ion-item"),e._UZ(22,"ion-input",12),e.qZA(),e.TgZ(23,"ion-item"),e._UZ(24,"ion-input",13),e.qZA(),e.TgZ(25,"ion-item"),e._UZ(26,"ion-input",14),e.qZA(),e.TgZ(27,"ion-item"),e._UZ(28,"ion-input",15),e.qZA()(),e.TgZ(29,"ion-button",16),e._uU(30," Update Customer "),e.qZA()()(),e._UZ(31,"ion-loading",17)),2&t&&(e.Q6J("translucent",!0),e.xp6(3),e.Q6J("defaultHref",n.defaultHref),e.xp6(4),e.Q6J("formGroup",n.customerDetailsForm),e.xp6(6),e.Q6J("maxlength",15),e.xp6(2),e.Q6J("maxlength",10),e.xp6(14),e.Q6J("disabled",!n.customerDetailsForm.valid),e.xp6(2),e.Q6J("isOpen",n.showSpinner))},dependencies:[r._Y,r.JJ,r.JL,r.nD,i.YG,i.Sm,i.W2,i.jY,i.Gu,i.pK,i.Ie,i.wh,i.wd,i.sr,i.as,i.j9,i.oU,r.sg,r.u,r.x0,q]}),d})()},{path:"",redirectTo:"report",pathMatch:"full"}]}];let E=(()=>{var o;class d{}return(o=d).\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[b.Bz.forChild(M),b.Bz]}),d})();var J=u(6208);let Y=(()=>{var o;class d{}return(o=d).\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[S.ez,r.u5,i.Pc,E,J.m]}),d})()}}]);