"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9664],{9664:(de,J,f)=>{f.r(J),f.d(J,{OrdersPageModule:()=>ae});var A=f(6814),l=f(95),a=f(3800),_=f(2436),y=f(5037),c=f(8380),Z=f(7906),e=f(5678),G=f(4429),Q=f(3289),Y=f(495),R=f(74);function z(r,s){if(1&r){const i=e.EpF();e.TgZ(0,"ion-radio-group",9),e.NdJ("ionChange",function(){const o=e.CHM(i).$implicit,d=e.oxw();return e.KtG(d.checkValue(o))}),e.TgZ(1,"ion-item")(2,"ion-radio",10),e._uU(3),e.qZA(),e._UZ(4,"br"),e.qZA()()}if(2&r){const i=s.$implicit,t=e.oxw();e.s9C("value",null==t.workingSelectedCusomter?null:t.workingSelectedCusomter.id),e.xp6(2),e.s9C("value",i.id),e.xp6(1),e.Oqu(i.fullName)}}let B=(()=>{var r;class s{constructor(){this.customers=[],this.title="Select Customers",this.selectionCancel=new e.vpe,this.selectionChange=new e.vpe,this.filteredItems=[]}ngOnInit(){this.filteredItems=[...this.customers],this.workingSelectedCusomter=this.selectedCustomer}trackItems(t,n){return n.id}cancelChanges(){this.selectionCancel.emit()}confirmChanges(){this.workingSelectedCusomter&&(console.log(this.workingSelectedCusomter),this.selectionChange.emit(this.workingSelectedCusomter))}searchbarInput(t){this.filterList(t.target.value)}filterList(t){if(void 0===t)this.filteredItems=[...this.customers];else{const n=t.toLowerCase();this.filteredItems=this.customers.filter(o=>{var d;return null===(d=o.fullName)||void 0===d?void 0:d.toLowerCase().includes(n)})}}checkValue(t){this.workingSelectedCusomter=t}}return(r=s).\u0275fac=function(t){return new(t||r)},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-customers-typeahead"]],inputs:{customers:"customers",selectedCustomer:"selectedCustomer",title:"title"},outputs:{selectionCancel:"selectionCancel",selectionChange:"selectionChange"},decls:15,vars:3,consts:[["slot","end"],["fill","solid","color","primary","expand","block","shape","round",3,"click"],[3,"ionInput"],["color","light",1,"ion-padding"],["id","modal-list",3,"inset"],[3,"value","ionChange",4,"ngFor","ngForOf"],["slot","fixed","vertical","bottom","horizontal","end"],[3,"click"],["name","checkmark-outline"],[3,"value","ionChange"],[3,"value"]],template:function(t,n){1&t&&(e.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),e._uU(3),e.qZA(),e.TgZ(4,"ion-buttons",0)(5,"ion-button",1),e.NdJ("click",function(){return n.cancelChanges()}),e._uU(6,"Cancel"),e.qZA()()(),e.TgZ(7,"ion-toolbar")(8,"ion-searchbar",2),e.NdJ("ionInput",function(d){return n.searchbarInput(d)}),e.qZA()()(),e.TgZ(9,"ion-content",3)(10,"ion-list",4),e.YNc(11,z,5,3,"ion-radio-group",5),e.qZA(),e.TgZ(12,"ion-fab",6)(13,"ion-fab-button",7),e.NdJ("click",function(){return n.confirmChanges()}),e._UZ(14,"ion-icon",8),e.qZA()()()),2&t&&(e.xp6(3),e.Oqu(n.title),e.xp6(7),e.Q6J("inset",!0),e.xp6(1),e.Q6J("ngForOf",n.filteredItems))},dependencies:[A.sg,a.YG,a.Sm,a.W2,a.IJ,a.W4,a.Gu,a.gu,a.Ie,a.q_,a.B7,a.se,a.VI,a.wd,a.sr,a.U5,a.QI,a.j9]}),s})();const V=["selectCustomer"];function H(r,s){1&r&&e._UZ(0,"div")}function L(r,s){if(1&r){const i=e.EpF();e.TgZ(0,"ion-content")(1,"ion-datetime",24),e.NdJ("ionChange",function(n){e.CHM(i);const o=e.oxw(2);return e.KtG(o.orderedDateChange(n))}),e.qZA()()}if(2&r){const i=e.oxw(2);e.xp6(1),e.Q6J("value",i.defaultOrderDate)("showDefaultButtons",!0)("showDefaultTitle",!0)}}function W(r,s){if(1&r){const i=e.EpF();e.TgZ(0,"ion-content")(1,"ion-datetime",24),e.NdJ("ionChange",function(n){e.CHM(i);const o=e.oxw(2);return e.KtG(o.expectedDeliveryDateChange(n))}),e.qZA()()}if(2&r){const i=e.oxw(2);e.xp6(1),e.Q6J("value",i.defaultExpectedDate)("showDefaultButtons",!0)("showDefaultTitle",!0)}}function K(r,s){1&r&&(e.TgZ(0,"ion-grid",25)(1,"ion-item"),e._UZ(2,"ion-input",26),e.qZA(),e.TgZ(3,"ion-item"),e._UZ(4,"ion-input",27),e.qZA(),e.TgZ(5,"ion-item"),e._UZ(6,"ion-input",28),e.qZA(),e.TgZ(7,"ion-item"),e._UZ(8,"ion-input",29),e.qZA(),e.TgZ(9,"ion-item"),e._UZ(10,"ion-input",30),e.qZA(),e.TgZ(11,"ion-item"),e._UZ(12,"ion-input",31),e.qZA()()),2&r&&(e.xp6(12),e.Q6J("maxlength",6))}function j(r,s){if(1&r){const i=e.EpF();e.TgZ(0,"form",8),e.NdJ("ngSubmit",function(){e.CHM(i);const n=e.oxw();return e.KtG(n.onSubmit())}),e.TgZ(1,"ion-item",9),e.NdJ("click",function(){e.CHM(i);const n=e.oxw();return e.KtG(n.openSelectCustomerPopup())}),e._UZ(2,"ion-input",10),e.qZA(),e.TgZ(3,"ion-item"),e._UZ(4,"ion-input",11),e.qZA(),e.TgZ(5,"ion-item"),e._UZ(6,"ion-input",12),e.qZA(),e.TgZ(7,"ion-item"),e._UZ(8,"ion-input",13),e.qZA(),e.TgZ(9,"ion-item"),e._UZ(10,"ion-input",14),e.qZA(),e.TgZ(11,"ion-item"),e._UZ(12,"ion-input",15),e.TgZ(13,"ion-button",16),e._UZ(14,"ion-icon",17),e.qZA(),e.TgZ(15,"ion-modal",18),e.YNc(16,L,2,3,"ng-template"),e.qZA()(),e.TgZ(17,"ion-item"),e._UZ(18,"ion-input",19),e.TgZ(19,"ion-button",16),e._UZ(20,"ion-icon",17),e.qZA(),e.TgZ(21,"ion-modal",20),e.YNc(22,W,2,3,"ng-template"),e.qZA()(),e.TgZ(23,"ion-item")(24,"ion-toggle",21),e.NdJ("ionChange",function(n){e.CHM(i);const o=e.oxw();return e.KtG(o.useCustomerAddressChange(n))}),e._uU(25," Apply customer address for delivery "),e.qZA()(),e.YNc(26,K,13,1,"ion-grid",22),e.TgZ(27,"ion-button",23),e._uU(28," Create Order "),e.qZA()()}if(2&r){const i=e.oxw();e.Q6J("formGroup",i.orderForm),e.xp6(1),e.Q6J("button",!0)("detail",!1),e.xp6(14),e.Q6J("keepContentsMounted",!0),e.xp6(6),e.Q6J("keepContentsMounted",!0),e.xp6(5),e.Q6J("ngIf",!i.hideAddress),e.xp6(1),e.Q6J("disabled",!i.orderForm.valid)}}function X(r,s){if(1&r){const i=e.EpF();e.TgZ(0,"ion-card")(1,"ion-card-content")(2,"h2"),e._uU(3,"New order has been created successfully with id: "),e.TgZ(4,"strong"),e._uU(5),e.qZA()()(),e.TgZ(6,"ion-button",32),e.NdJ("click",function(){e.CHM(i);const n=e.oxw();return e.KtG(n.viewOrderDetails())}),e._uU(7,"View Order Details"),e.qZA(),e._UZ(8,"br"),e.TgZ(9,"ion-button",32),e.NdJ("click",function(){e.CHM(i);const n=e.oxw();return e.KtG(n.createAnotherOrder())}),e._uU(10,"Create New Order"),e.qZA()()}if(2&r){const i=e.oxw();e.xp6(5),e.Oqu(null==i.newCreatedOrder?null:i.newCreatedOrder.id)}}function F(r,s){if(1&r){const i=e.EpF();e.TgZ(0,"app-customers-typeahead",33),e.NdJ("selectionChange",function(n){e.CHM(i);const o=e.oxw();return e.KtG(o.customerSelectedEvent(n))})("selectionCancel",function(){e.CHM(i);const n=e.oxw();return e.MAs(8).dismiss(),e.KtG(n.openSelectCustomer=!1)}),e.qZA()}if(2&r){const i=e.oxw();e.Q6J("customers",i.customers)("selectedCustomer",i.chosenCustomer)}}let $=(()=>{var r;class s{constructor(t,n,o,d,u){this.formBuilder=t,this.customerStore=n,this.addressesStore=o,this.orderStore=d,this.router=u,this.hideAddress=!0,this.showSpinner=!1,this.orderCreated=!1,this.openSelectCustomer=!1,this.defaultOrderDate=y.ou.now(),this.defaultExpectedDate=y.ou.now().plus({day:2})}ngOnInit(){console.log("Create order initialized..."),this.initializeOrderCreateForm()}ionViewWillEnter(){var t,n;this.hideAddress=!0,this.chosenCustomer=void 0,this.orderCreated=!1;let o=new Map;null===(t=this.addressesStore.addresses)||void 0===t||t.forEach(d=>{"CUSTOMER"===d.addressType&&o.set(d.customerId,d)}),null===(n=this.customerStore.customers)||void 0===n||n.forEach(d=>{d.address=o.get(d.id),d.fullName=d.firstName+" "+d.lastName}),this.customers=this.customerStore.customers,this.initializeOrderCreateForm()}ionViewWillLeave(){this.openSelectCustomer=!1,this.hideAddress=!0,this.showSpinner=!1,this.orderCreated=!1}ngOnDestroy(){this.openSelectCustomer=!1,this.hideAddress=!0,this.showSpinner=!1,this.orderCreated=!1,this.selectCustomer.dismiss(!0)}initializeOrderCreateForm(){this.orderForm=this.formBuilder.group({customerName:["",[l.kI.required]],size:["",[l.kI.required,l.kI.min(1)]],quantity:["",[l.kI.required,l.kI.min(1)]],gsm:["",[l.kI.required,l.kI.min(1)]],rate:["",[l.kI.required,l.kI.min(1)]],useCustomerAddress:[{value:!0,disabled:!0},[l.kI.required]],address:this.formBuilder.group({addressOne:[{value:"",disabled:!0},l.kI.required],addressTwo:[{value:"",disabled:!0},l.kI.required],city:[{value:"",disabled:!0},l.kI.required],district:[{value:"",disabled:!0},l.kI.required],state:[{value:"",disabled:!0},l.kI.required],pinCode:[{value:"",disabled:!0},[l.kI.required,l.kI.minLength(6),l.kI.maxLength(6)]]}),orderedDate:[this.defaultOrderDate.toFormat(c.f.DISPAY_DATE_TIME_FORMAT),l.kI.required],expectedDeliveryDate:[this.defaultExpectedDate.toFormat(c.f.DISPAY_DATE_TIME_FORMAT),l.kI.required]})}onSubmit(){if(this.orderForm.valid){var t,n,o;let C;var v,d,u,p;this.orderForm.value.useCustomerAddress?C=null===(v=this.chosenCustomer)||void 0===v?void 0:v.address:(C={id:Math.max(...this.addressesStore.addresses.map(g=>g.id))+1,addressOne:this.orderForm.value.address.addressOne,addressTwo:this.orderForm.value.address.addressTwo,city:this.orderForm.value.address.city,district:this.orderForm.value.address.district,state:this.orderForm.value.address.state,country:"IN",pinCode:this.orderForm.value.address.pinCode,customerId:null===(d=this.chosenCustomer)||void 0===d?void 0:d.id,addressType:"ORDER",createdOn:Z.E.currentDate(c.f.SYSTEM_DATE_TIME_FORMAT),createdBy:null===(u=this.chosenCustomer)||void 0===u?void 0:u.createdBy,modifiedOn:Z.E.currentDate(c.f.SYSTEM_DATE_TIME_FORMAT),modifiedBy:null===(p=this.chosenCustomer)||void 0===p?void 0:p.modifiedBy},this.addressesStore.addresses.unshift(C));let m={id:Math.max(...this.orderStore.orders.map(g=>g.id))+1,customer:this.chosenCustomer,size:this.orderForm.value.size,quantity:this.orderForm.value.quantity,gsm:this.orderForm.value.gsm,rate:this.orderForm.value.rate,address:C,status:"ORDERED",orderedDate:Z.E.convertDateTime(this.orderForm.value.orderedDate,c.f.DISPAY_DATE_TIME_FORMAT,c.f.SYSTEM_DATE_TIME_FORMAT),expectedDeliveryDate:Z.E.convertDateTime(this.orderForm.value.expectedDeliveryDate,c.f.DISPAY_DATE_TIME_FORMAT,c.f.SYSTEM_DATE_TIME_FORMAT),createdOn:Z.E.currentDate(c.f.SYSTEM_DATE_TIME_FORMAT),createdBy:null===(t=this.chosenCustomer)||void 0===t?void 0:t.createdBy,modifiedOn:Z.E.currentDate(c.f.SYSTEM_DATE_TIME_FORMAT),modifiedBy:null===(n=this.chosenCustomer)||void 0===n?void 0:n.modifiedBy};null==m||null===(o=m.customer)||void 0===o||delete o.address,console.log(m),this.showSpinner=!0,this.newCreatedOrder=m,this.orderStore.orders.unshift(m),setTimeout(()=>{this.showSpinner=!1,this.orderCreated=!0},2e3)}else console.log("Create order form is invalid...")}customerSelectedEvent(t){var n,o,d,u,p,v,C,m,g,T,b,O,h,D;this.openSelectCustomer=!1,t&&(this.chosenCustomer=t,null===(n=this.orderForm.get("customerName"))||void 0===n||n.setValue(t.fullName),null===(o=this.orderForm.get("address"))||void 0===o||null===(o=o.get("addressOne"))||void 0===o||o.setValue(null===(d=t.address)||void 0===d?void 0:d.addressOne),null===(u=this.orderForm.get("address"))||void 0===u||null===(u=u.get("addressTwo"))||void 0===u||u.setValue(null===(p=t.address)||void 0===p?void 0:p.addressTwo),null===(v=this.orderForm.get("address"))||void 0===v||null===(v=v.get("city"))||void 0===v||v.setValue(null===(C=t.address)||void 0===C?void 0:C.city),null===(m=this.orderForm.get("address"))||void 0===m||null===(m=m.get("district"))||void 0===m||m.setValue(null===(g=t.address)||void 0===g?void 0:g.district),null===(T=this.orderForm.get("address"))||void 0===T||null===(T=T.get("state"))||void 0===T||T.setValue(null===(b=t.address)||void 0===b?void 0:b.state),null===(O=this.orderForm.get("address"))||void 0===O||null===(O=O.get("pinCode"))||void 0===O||O.setValue(null===(h=t.address)||void 0===h?void 0:h.pinCode),null===(D=this.orderForm.get("useCustomerAddress"))||void 0===D||D.enable()),this.selectCustomer.dismiss()}orderedDateChange(t){var n,o;null===(n=this.orderForm.get("orderedDate"))||void 0===n||n.setValue(y.ou.fromISO(null==t||null===(o=t.detail)||void 0===o?void 0:o.value).toFormat(c.f.DISPAY_DATE_TIME_FORMAT))}expectedDeliveryDateChange(t){var n,o;null===(n=this.orderForm.get("expectedDeliveryDate"))||void 0===n||n.setValue(y.ou.fromISO(null==t||null===(o=t.detail)||void 0===o?void 0:o.value).toFormat(c.f.DISPAY_DATE_TIME_FORMAT))}useCustomerAddressChange(t){var n,o,d,u,p,v,C,m,g,T,b,O,h,D,I,S,x,k,q,M,P,E,w,N,U;null!=t&&null!==(n=t.detail)&&void 0!==n&&n.checked?(this.hideAddress=!0,null===(o=this.orderForm.get("address"))||void 0===o||null===(o=o.get("addressOne"))||void 0===o||o.setValue(null===(d=this.chosenCustomer)||void 0===d||null===(d=d.address)||void 0===d?void 0:d.addressOne),null===(u=this.orderForm.get("address"))||void 0===u||null===(u=u.get("addressTwo"))||void 0===u||u.setValue(null===(p=this.chosenCustomer)||void 0===p||null===(p=p.address)||void 0===p?void 0:p.addressTwo),null===(v=this.orderForm.get("address"))||void 0===v||null===(v=v.get("city"))||void 0===v||v.setValue(null===(C=this.chosenCustomer)||void 0===C||null===(C=C.address)||void 0===C?void 0:C.city),null===(m=this.orderForm.get("address"))||void 0===m||null===(m=m.get("district"))||void 0===m||m.setValue(null===(g=this.chosenCustomer)||void 0===g||null===(g=g.address)||void 0===g?void 0:g.district),null===(T=this.orderForm.get("address"))||void 0===T||null===(T=T.get("state"))||void 0===T||T.setValue(null===(b=this.chosenCustomer)||void 0===b||null===(b=b.address)||void 0===b?void 0:b.state),null===(O=this.orderForm.get("address"))||void 0===O||null===(O=O.get("pinCode"))||void 0===O||O.setValue(null===(h=this.chosenCustomer)||void 0===h||null===(h=h.address)||void 0===h?void 0:h.pinCode),null===(D=this.orderForm.get("address"))||void 0===D||null===(D=D.get("addressOne"))||void 0===D||D.disable(),null===(I=this.orderForm.get("address"))||void 0===I||null===(I=I.get("addressTwo"))||void 0===I||I.disable(),null===(S=this.orderForm.get("address"))||void 0===S||null===(S=S.get("city"))||void 0===S||S.disable(),null===(x=this.orderForm.get("address"))||void 0===x||null===(x=x.get("district"))||void 0===x||x.disable(),null===(k=this.orderForm.get("address"))||void 0===k||null===(k=k.get("state"))||void 0===k||k.disable(),null===(q=this.orderForm.get("address"))||void 0===q||null===(q=q.get("pinCode"))||void 0===q||q.disable()):(this.hideAddress=!1,null===(M=this.orderForm.get("address"))||void 0===M||null===(M=M.get("addressOne"))||void 0===M||M.enable(),null===(P=this.orderForm.get("address"))||void 0===P||null===(P=P.get("addressTwo"))||void 0===P||P.enable(),null===(E=this.orderForm.get("address"))||void 0===E||null===(E=E.get("city"))||void 0===E||E.enable(),null===(w=this.orderForm.get("address"))||void 0===w||null===(w=w.get("district"))||void 0===w||w.enable(),null===(N=this.orderForm.get("address"))||void 0===N||null===(N=N.get("state"))||void 0===N||N.enable(),null===(U=this.orderForm.get("address"))||void 0===U||null===(U=U.get("pinCode"))||void 0===U||U.enable())}createAnotherOrder(){this.orderCreated=!1,this.newCreatedOrder=void 0,this.orderForm.reset(),this.ionViewWillEnter()}viewOrderDetails(){var t;this.router.navigate(["orders/"+(null===(t=this.newCreatedOrder)||void 0===t?void 0:t.id)])}openSelectCustomerPopup(){this.openSelectCustomer=!0}}return(r=s).\u0275fac=function(t){return new(t||r)(e.Y36(l.qu),e.Y36(G.k),e.Y36(Q.u),e.Y36(Y.i),e.Y36(_.F0))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-create-order"]],viewQuery:function(t,n){if(1&t&&e.Gf(V,7),2&t){let o;e.iGM(o=e.CRH())&&(n.selectCustomer=o.first)}},decls:11,vars:5,consts:[["pageName","Create Order"],["fullscreen","true"],[4,"ngIf","ngIfThen","ngIfElse"],["orderCreationSection",""],["orderCreatedSection",""],[3,"isOpen"],["selectCustomer",""],["message","Processing create order request",3,"isOpen"],[3,"formGroup","ngSubmit"],[3,"button","detail","click"],["labelPlacement","stacked","label","Name","formControlName","customerName","placeholder","Select Customer Name","readonly",""],["labelPlacement","stacked","label","Size","formControlName","size","placeholder","Provide Size","type","number"],["labelPlacement","stacked","label","Quantity","formControlName","quantity","placeholder","Provide Quantity","type","number"],["labelPlacement","stacked","label","GSM","formControlName","gsm","placeholder","Provide GSM","type","number"],["labelPlacement","stacked","label","Rate","formControlName","rate","placeholder","Provide rate","type","number"],["labelPlacement","stacked","label","Ordered Date","formControlName","orderedDate","placeholder","Select Ordered Date","readonly","","id","open-ordered-date-modal"],["fill","clear","slot","end"],["slot","icon-only","name","calendar-outline","aria-hidden","true"],["trigger","open-ordered-date-modal",3,"keepContentsMounted"],["labelPlacement","stacked","label","Expected Deliery Date","formControlName","expectedDeliveryDate","placeholder","Select Expected Deliery Date","readonly","","id","open-expected-delivery-date-modal"],["trigger","open-expected-delivery-date-modal",3,"keepContentsMounted"],["formControlName","useCustomerAddress",3,"ionChange"],["formGroupName","address",4,"ngIf"],["expand","block","type","submit",3,"disabled"],["locale","en-GB","hourCycle","h12","size","cover",3,"value","showDefaultButtons","showDefaultTitle","ionChange"],["formGroupName","address"],["labelPlacement","stacked","label","Address1","formControlName","addressOne","placeholder","Provide Address1"],["labelPlacement","stacked","label","Address2","formControlName","addressTwo","placeholder","Provide Address2"],["labelPlacement","stacked","label","City","formControlName","city","placeholder","Provide city"],["labelPlacement","stacked","label","District","formControlName","district","placeholder","Provide District"],["labelPlacement","stacked","label","State","formControlName","state","placeholder","Provide State"],["labelPlacement","stacked","label","Pin Code","formControlName","pinCode","placeholder","Provide Pin Code","type","number",3,"maxlength"],["fill","solid","expand","block",3,"click"],["title","Select Customers",1,"ion-page",3,"customers","selectedCustomer","selectionChange","selectionCancel"]],template:function(t,n){if(1&t&&(e._UZ(0,"app-header",0),e.TgZ(1,"ion-content",1),e.YNc(2,H,1,0,"div",2)(3,j,29,7,"ng-template",null,3,e.W1O)(5,X,11,1,"ng-template",null,4,e.W1O),e.qZA(),e.TgZ(7,"ion-modal",5,6),e.YNc(9,F,1,2,"ng-template"),e.qZA(),e._UZ(10,"ion-loading",7)),2&t){const o=e.MAs(4),d=e.MAs(6);e.xp6(2),e.Q6J("ngIf",n.orderCreated)("ngIfThen",d)("ngIfElse",o),e.xp6(5),e.Q6J("isOpen",n.openSelectCustomer),e.xp6(3),e.Q6J("isOpen",n.showSpinner)}},dependencies:[A.O5,l._Y,l.JJ,l.JL,l.nD,a.YG,a.PM,a.FN,a.W2,a.x4,a.jY,a.gu,a.pK,a.Ie,a.wh,a.ho,a.ki,a.w,a.as,a.QI,a.j9,R.G,l.sg,l.u,l.x0,B],styles:["#box[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translateY(-50%) translate(-50%);z-index:100;display:flex;align-items:center;justify-content:center;background:var(--ion-background-color, #fff);width:90%;height:100px;border-radius:10px}"]}),s})();function ee(r,s){if(1&r){const i=e.EpF();e.TgZ(0,"ion-content")(1,"ion-datetime",33),e.NdJ("ionChange",function(n){e.CHM(i);const o=e.oxw(2);return e.KtG(o.deliveredDateChange(n))}),e.qZA()()}if(2&r){const i=e.oxw(2);e.xp6(1),e.Q6J("value",i.todayOrderDate)("showDefaultButtons",!0)("showDefaultTitle",!0)}}function te(r,s){1&r&&(e.TgZ(0,"ion-item"),e._UZ(1,"ion-input",29),e.TgZ(2,"ion-button",30),e._UZ(3,"ion-icon",31),e.qZA(),e.TgZ(4,"ion-modal",32),e.YNc(5,ee,2,3,"ng-template"),e.qZA()()),2&r&&(e.xp6(4),e.Q6J("keepContentsMounted",!0))}let ne=(()=>{var r;class s{constructor(t,n,o,d){this.formBuilder=t,this.ordersStore=n,this.activatedRoute=o,this.router=d,this.defaultHref="orders/report",this.todayOrderDate=y.ou.now(),this.showSpinner=!1}ngOnInit(){this.orderDetailsForm=this.formBuilder.group({customerName:["",[l.kI.required]],gst:["",[l.kI.required]],size:["",l.kI.required],quantity:["",l.kI.required],gsm:["",l.kI.required],rate:["",l.kI.required],address:this.formBuilder.group({addressOne:["",l.kI.required],addressTwo:["",l.kI.required],city:["",l.kI.required],district:["",l.kI.required],state:["",l.kI.required],pinCode:["",l.kI.required]}),status:["",l.kI.required],createdDate:["",l.kI.required],orderedDate:["",l.kI.required],expectedDeliveryDate:["",[l.kI.required]],deliveredDate:["",l.kI.required]})}ionViewWillEnter(){const t=this.activatedRoute.snapshot.paramMap.get("id");t&&!Number.isNaN(t)&&this.ordersStore.orders&&(this.selectedOrder=this.ordersStore.orders.find(n=>n.id===+t),this.selectedOrder?this.orderDetailsForm=this.formBuilder.group({customerName:[{value:this.selectedOrder.customer.firstName+" "+this.selectedOrder.customer.lastName,disabled:!0},[l.kI.required]],gst:[{value:this.selectedOrder.customer.gstNumber,disabled:!0},[l.kI.required]],size:[this.selectedOrder.size,l.kI.required],quantity:[this.selectedOrder.quantity,l.kI.required],gsm:[this.selectedOrder.gsm,l.kI.required],rate:[this.selectedOrder.rate,l.kI.required],address:this.formBuilder.group({addressOne:[{value:this.selectedOrder.address.addressOne,disabled:!0},[l.kI.required]],addressTwo:[{value:this.selectedOrder.address.addressTwo,disabled:!0},l.kI.required],city:[{value:this.selectedOrder.address.city,disabled:!0},l.kI.required],district:[{value:this.selectedOrder.address.district,disabled:!0},l.kI.required],state:[{value:this.selectedOrder.address.state,disabled:!0},l.kI.required],pinCode:[{value:this.selectedOrder.address.pinCode,disabled:!0},l.kI.required]}),status:[this.selectedOrder.status.toLowerCase(),[l.kI.required]],createdDate:[{value:Z.E.convertDateTime(this.selectedOrder.createdOn,c.f.SYSTEM_DATE_TIME_FORMAT,c.f.DISPAY_DATE_TIME_FORMAT),disabled:!0},l.kI.required],orderedDate:[{value:Z.E.convertDateTime(this.selectedOrder.orderedDate,c.f.SYSTEM_DATE_TIME_FORMAT,c.f.DISPAY_DATE_TIME_FORMAT),disabled:!0},l.kI.required],expectedDeliveryDate:[{value:Z.E.convertDateTime(this.selectedOrder.expectedDeliveryDate,c.f.SYSTEM_DATE_TIME_FORMAT,c.f.DISPAY_DATE_TIME_FORMAT),disabled:!0},[l.kI.required]],deliveredDate:[{value:this.todayOrderDate.toFormat(c.f.DISPAY_DATE_TIME_FORMAT),disabled:!1}]}):console.log("order not available")),this.selectedOrder||this.router.navigate(["orders/report"])}deliveredDateChange(t){var n,o;null===(n=this.orderDetailsForm.get("deliveredDate"))||void 0===n||n.setValue(y.ou.fromISO(null==t||null===(o=t.detail)||void 0===o?void 0:o.value).toFormat(c.f.DISPAY_DATE_TIME_FORMAT))}orderStatusChanged(t){var n,o;"delivered"===(null==t?void 0:t.detail.valeu)?null===(n=this.orderDetailsForm.get("deliveredDate"))||void 0===n||n.addValidators(l.kI.required):null===(o=this.orderDetailsForm.get("deliveredDate"))||void 0===o||o.removeValidators(l.kI.required)}updateOrderDetails(){if(this.orderDetailsForm.valid){var t,n,o,d,u;let p=this.ordersStore.orders.findIndex(v=>v.id===this.selectedOrder.id);this.ordersStore.orders[p].status=null===(t=this.orderDetailsForm.get("status"))||void 0===t?void 0:t.value.toUpperCase(),this.ordersStore.orders[p].size=null===(n=this.orderDetailsForm.get("size"))||void 0===n?void 0:n.value,this.ordersStore.orders[p].quantity=null===(o=this.orderDetailsForm.get("quantity"))||void 0===o?void 0:o.value,this.ordersStore.orders[p].gsm=null===(d=this.orderDetailsForm.get("gsm"))||void 0===d?void 0:d.value,this.ordersStore.orders[p].rate=null===(u=this.orderDetailsForm.get("rate"))||void 0===u?void 0:u.value,this.ordersStore.orders[p].deliveredDate=Z.E.convertDateTime(this.orderDetailsForm.value.deliveredDate,c.f.DISPAY_DATE_TIME_FORMAT,c.f.SYSTEM_DATE_TIME_FORMAT),this.showSpinner=!0,setTimeout(()=>{this.showSpinner=!1,setTimeout(()=>{this.router.navigate(["orders/report"])},100)},2e3)}}}return(r=s).\u0275fac=function(t){return new(t||r)(e.Y36(l.qu),e.Y36(Y.i),e.Y36(_.gz),e.Y36(_.F0))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-order-details"]],decls:52,vars:6,consts:[[3,"translucent"],["slot","start"],["text","",3,"defaultHref"],["fullscreen","true"],[3,"formGroup","ngSubmit"],["labelPlacement","stacked","label","Name","formControlName","customerName","readonly","true","placeholder","Provide Name"],["labelPlacement","stacked","label","GST","formControlName","gst","readonly","true","placeholder","Provide GST"],["labelPlacement","stacked","label","Creation Date","formControlName","createdDate","readonly","true","placeholder","Provide Created Date"],["labelPlacement","stacked","label","Ordered Date","formControlName","orderedDate","readonly","true","placeholder","Provide Ordered Date"],["labelPlacement","stacked","label","Expected Delivery Date","formControlName","expectedDeliveryDate","readonly","true","placeholder","Provide Expected Delivery Date"],["labelPlacement","stacked","label","Size","formControlName","size","placeholder","Provide Size","type","number"],["labelPlacement","stacked","label","Quantity","formControlName","quantity","placeholder","Provide Quantity","type","number"],["labelPlacement","stacked","label","GSM","formControlName","gsm","placeholder","Provide GSM","type","number"],["labelPlacement","stacked","label","Rate","formControlName","rate","placeholder","Provide Rate","type","number"],["labelPlacement","stacked","label","Order Status","placeholder","Select Order Status","formControlName","status",3,"ionChange"],["orderStatus",""],["value","ordered"],["value","delivered"],["value","cancelled"],[4,"ngIf"],["formGroupName","address"],["labelPlacement","stacked","label","Address1","formControlName","addressOne","placeholder","Provide Address1","readonly",""],["labelPlacement","stacked","label","Address2","formControlName","addressTwo","placeholder","Provide Address2","readonly",""],["labelPlacement","stacked","label","City","formControlName","city","placeholder","Provide city","readonly",""],["labelPlacement","stacked","label","District","formControlName","district","placeholder","Provide District","readonly",""],["labelPlacement","stacked","label","State","formControlName","state","placeholder","Provide State","readonly",""],["labelPlacement","stacked","label","Pin Code","formControlName","pinCode","placeholder","Provide Pin Code","type","number","readonly",""],["expand","block","type","submit",3,"disabled"],["message","Processing update order request",3,"isOpen"],["labelPlacement","stacked","label","Delivered Date","formControlName","deliveredDate","placeholder","Select Delivered Date","readonly","","id","open-delivered-date-modal"],["fill","clear","slot","end"],["slot","icon-only","name","calendar-outline","aria-hidden","true"],["trigger","open-delivered-date-modal",3,"keepContentsMounted"],["locale","en-GB","hourCycle","h12",3,"value","showDefaultButtons","showDefaultTitle","ionChange"]],template:function(t,n){if(1&t&&(e.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1),e._UZ(3,"ion-back-button",2),e.qZA(),e.TgZ(4,"ion-title"),e._uU(5," Order Details "),e.qZA()()(),e.TgZ(6,"ion-content",3)(7,"form",4),e.NdJ("ngSubmit",function(){return n.updateOrderDetails()}),e.TgZ(8,"ion-item"),e._UZ(9,"ion-input",5),e.qZA(),e.TgZ(10,"ion-item"),e._UZ(11,"ion-input",6),e.qZA(),e.TgZ(12,"ion-item"),e._UZ(13,"ion-input",7),e.qZA(),e.TgZ(14,"ion-item"),e._UZ(15,"ion-input",8),e.qZA(),e.TgZ(16,"ion-item"),e._UZ(17,"ion-input",9),e.qZA(),e.TgZ(18,"ion-item"),e._UZ(19,"ion-input",10),e.qZA(),e.TgZ(20,"ion-item"),e._UZ(21,"ion-input",11),e.qZA(),e.TgZ(22,"ion-item"),e._UZ(23,"ion-input",12),e.qZA(),e.TgZ(24,"ion-item"),e._UZ(25,"ion-input",13),e.qZA(),e.TgZ(26,"ion-item")(27,"ion-select",14,15),e.NdJ("ionChange",function(d){return n.orderStatusChanged(d)}),e.TgZ(29,"ion-select-option",16),e._uU(30,"Ordered"),e.qZA(),e.TgZ(31,"ion-select-option",17),e._uU(32,"Delivered"),e.qZA(),e.TgZ(33,"ion-select-option",18),e._uU(34,"Cancelled"),e.qZA()()(),e.YNc(35,te,6,1,"ion-item",19),e.TgZ(36,"ion-grid",20)(37,"ion-item"),e._UZ(38,"ion-input",21),e.qZA(),e.TgZ(39,"ion-item"),e._UZ(40,"ion-input",22),e.qZA(),e.TgZ(41,"ion-item"),e._UZ(42,"ion-input",23),e.qZA(),e.TgZ(43,"ion-item"),e._UZ(44,"ion-input",24),e.qZA(),e.TgZ(45,"ion-item"),e._UZ(46,"ion-input",25),e.qZA(),e.TgZ(47,"ion-item"),e._UZ(48,"ion-input",26),e.qZA()(),e.TgZ(49,"ion-button",27),e._uU(50," Update Order "),e.qZA()()(),e._UZ(51,"ion-loading",28)),2&t){const o=e.MAs(28);e.Q6J("translucent",!0),e.xp6(3),e.Q6J("defaultHref",n.defaultHref),e.xp6(4),e.Q6J("formGroup",n.orderDetailsForm),e.xp6(28),e.Q6J("ngIf","delivered"===o.value),e.xp6(14),e.Q6J("disabled",!n.orderDetailsForm.valid),e.xp6(2),e.Q6J("isOpen",n.showSpinner)}},dependencies:[A.O5,l._Y,l.JJ,l.JL,a.YG,a.Sm,a.W2,a.x4,a.jY,a.Gu,a.gu,a.pK,a.Ie,a.wh,a.t9,a.n0,a.wd,a.sr,a.ki,a.as,a.QI,a.j9,a.oU,l.sg,l.u,l.x0]}),s})();function re(r,s){if(1&r&&(e.TgZ(0,"ion-item",5)(1,"ion-label"),e.ALo(2,"lowercase"),e.TgZ(3,"h4",6),e._uU(4),e.qZA(),e.TgZ(5,"h4"),e._uU(6),e.qZA(),e.TgZ(7,"ion-text",6),e._uU(8),e.ALo(9,"date"),e.qZA(),e.TgZ(10,"p"),e._uU(11),e.ALo(12,"titlecase"),e.qZA()()()),2&r){const i=s.$implicit;e.MGl("routerLink","/orders/",i.id,""),e.xp6(1),e.Gre("ion-label-",e.lcZ(2,11,i.status),""),e.xp6(3),e.HOy(" (S):",i.size," \u2013 (Q):",i.quantity," \u2013 (G):",i.gsm," \u2013 (R):",i.rate," "),e.xp6(2),e.hij(" ",i.customer.firstName+" "+i.customer.lastName," "),e.xp6(2),e.hij(" ",e.xi3(9,13,"ordered"===i.status.toLowerCase()?i.expectedDeliveryDate:i.deliveredDate,"medium")," "),e.xp6(3),e.hij(" ",e.lcZ(12,16,i.status)," ")}}const le=[{path:"",component:(()=>{var r;class s{constructor(){}ngOnInit(){console.log("Order Page called")}}return(r=s).\u0275fac=function(t){return new(t||r)},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-orders"]],decls:9,vars:0,consts:[["slot","bottom"],["tab","create"],["name","create-outline"],["tab","report"],["name","document-text-outline"]],template:function(t,n){1&t&&(e._UZ(0,"ion-router-outlet"),e.TgZ(1,"ion-tabs")(2,"ion-tab-bar",0)(3,"ion-tab-button",1),e._UZ(4,"ion-icon",2),e._uU(5," Place Order "),e.qZA(),e.TgZ(6,"ion-tab-button",3),e._UZ(7,"ion-icon",4),e._uU(8," Order Reports "),e.qZA()()())},dependencies:[a.gu,a.yq,a.ZU,a.UN,a.jP]}),s})(),children:[{path:"create",component:$},{path:"report",component:(()=>{var r;class s{constructor(t){this.orderStore=t}ngOnInit(){console.log("Order report called")}ionViewWillEnter(){this.getOrders()}getOrders(){this.orders=this.orderStore.orders}orderClick(t){console.log(t)}}return(r=s).\u0275fac=function(t){return new(t||r)(e.Y36(Y.i))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-orders-report"]],decls:7,vars:1,consts:[["pageName","Orders Report"],["fullscreen","true"],["slot","start",3,"routerLink",4,"ngFor","ngForOf"],["slot","fixed","vertical","bottom","horizontal","end"],["name","funnel-outline"],["slot","start",3,"routerLink"],[1,"ion-text-end","ion-float-right"]],template:function(t,n){1&t&&(e._UZ(0,"app-header",0),e.TgZ(1,"ion-content",1)(2,"ion-list"),e.YNc(3,re,13,18,"ion-item",2),e.qZA(),e.TgZ(4,"ion-fab",3)(5,"ion-fab-button"),e._UZ(6,"ion-icon",4),e.qZA()()()),2&t&&(e.xp6(3),e.Q6J("ngForOf",n.orders))},dependencies:[A.sg,a.W2,a.IJ,a.W4,a.gu,a.Ie,a.Q$,a.q_,a.yW,a.YI,_.rH,R.G,A.i8,A.rS,A.uU],styles:[".ion-label-delivered[_ngcontent-%COMP%]{border-left:3px solid var(--ion-color-success);padding-left:3px}.ion-label-ordered[_ngcontent-%COMP%]{border-left:3px solid var(--ion-color-warning);padding-left:3px}.ion-label-cancelled[_ngcontent-%COMP%]{border-left:3px solid var(--ion-color-danger);padding-left:3px}.ion-label-others[_ngcontent-%COMP%]{border-left:3px solid var(--ion-color-dark);padding-left:3px}ion-text[_ngcontent-%COMP%]{color:var(--ion-color-primary)}"]}),s})()},{path:":id",component:ne},{path:"",redirectTo:"report",pathMatch:"full"}]}];let oe=(()=>{var r;class s{}return(r=s).\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[_.Bz.forChild(le),_.Bz]}),s})();var ie=f(6208);let ae=(()=>{var r;class s{}return(r=s).\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[A.ez,l.u5,a.Pc,oe,ie.m]}),s})()}}]);