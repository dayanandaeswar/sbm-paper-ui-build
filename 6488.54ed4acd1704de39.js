"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6488],{6488:(y,m,l)=>{l.r(m),l.d(m,{LoginPageModule:()=>F});var c=l(6814),g=l(95),r=l(3800),d=l(2436),p=l(5861),e=l(5678),h=l(2333),f=l(2251);function v(o,a){1&o&&(e.TgZ(0,"ion-note",9),e._uU(1," Username is required. "),e.qZA())}function P(o,a){if(1&o&&(e.TgZ(0,"ion-label",7),e.YNc(1,v,2,0,"ion-note",8),e.qZA()),2&o){const i=e.oxw();let n;e.xp6(1),e.Q6J("ngIf",null==(n=i.loginForm.get("username"))||null==n.errors?null:n.errors.required)}}function I(o,a){1&o&&(e.TgZ(0,"ion-note",9),e._uU(1," Password is required. "),e.qZA())}function S(o,a){if(1&o&&(e.TgZ(0,"ion-label",7),e.YNc(1,I,2,0,"ion-note",8),e.qZA()),2&o){const i=e.oxw();let n;e.xp6(1),e.Q6J("ngIf",null==(n=i.loginForm.get("password"))||null==n.errors?null:n.errors.required)}}const L=[{path:"",component:(()=>{var o;class a{constructor(n,t,s,u,T){this.formBuilder=n,this.router=t,this.authService=s,this.alertController=u,this.appDataStore=T}ngOnInit(){this.loginForm=this.formBuilder.group({username:["",[g.kI.required]],password:["",[g.kI.required]]})}ionViewWillEnter(){console.log("login page loaded.."),"true"===sessionStorage.getItem("userLoggedIn")&&sessionStorage.getItem("authResData")&&(sessionStorage.setItem("userLoggedIn","true"),this.appDataStore.authResData=JSON.parse(sessionStorage.getItem("authResData")),this.router.navigate(["orders"]),this.appDataStore.enableUserIdleCheck(!0),this.appDataStore.enableRefreshToken(!0))}login(){this.loginForm.valid&&this.authService.authenticateUser({data:{username:this.loginForm.value.username,password:this.loginForm.value.password}}).subscribe({next:t=>{t.data&&t.data.authStatus?(sessionStorage.setItem("userLoggedIn","true"),sessionStorage.setItem("authResData",JSON.stringify(t.data)),this.appDataStore.authResData=t.data,this.router.navigate(["orders"]),this.appDataStore.enableUserIdleCheck(!0),this.appDataStore.enableRefreshToken(!0)):this.presentInvalidCredentialsAlert()},error:t=>{this.presentInvalidCredentialsAlert()}})}presentInvalidCredentialsAlert(){var n=this;return(0,p.Z)(function*(){yield(yield n.alertController.create({header:"Invalid credentails",subHeader:"",message:"Please provide valid credentials.",buttons:["Close"]})).present()})()}ngOnDestroy(){console.log("login componenet is destroed.....")}}return(o=a).\u0275fac=function(n){return new(n||o)(e.Y36(g.qu),e.Y36(d.F0),e.Y36(h.e),e.Y36(r.Br),e.Y36(f.o))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-login"]],decls:17,vars:4,consts:[[1,"ion-text-center"],["color","primary"],[3,"formGroup","ngSubmit"],["labelPlacement","stacked","label","Username","formControlName","username","placeholder","Provide username"],["class","ion-margin-start","slot","error",4,"ngIf"],["type","password","labelPlacement","stacked","label","Password","formControlName","password","placeholder","Provide password"],["type","submit","color","primary","expand","block",3,"disabled","click"],["slot","error",1,"ion-margin-start"],["color","danger",4,"ngIf"],["color","danger"]],template:function(n,t){if(1&n&&(e.TgZ(0,"ion-content")(1,"ion-card")(2,"ion-card-header",0)(3,"ion-card-title",1),e._uU(4,"SBM Papers Login"),e.qZA()(),e.TgZ(5,"ion-card-content")(6,"form",2),e.NdJ("ngSubmit",function(){return""}),e.TgZ(7,"ion-item"),e._UZ(8,"ion-input",3),e.qZA(),e.YNc(9,P,2,1,"ion-label",4),e.TgZ(10,"ion-item"),e._UZ(11,"ion-input",5),e.qZA(),e.YNc(12,S,2,1,"ion-label",4),e.TgZ(13,"ion-row")(14,"ion-col")(15,"ion-button",6),e.NdJ("click",function(){return t.login()}),e._uU(16,"Sign In"),e.qZA()()()()()()()),2&n){let s,u;e.xp6(6),e.Q6J("formGroup",t.loginForm),e.xp6(3),e.Q6J("ngIf",(null==(s=t.loginForm.get("username"))?null:s.invalid)&&((null==(s=t.loginForm.get("username"))?null:s.dirty)||(null==(s=t.loginForm.get("username"))?null:s.touched))),e.xp6(3),e.Q6J("ngIf",(null==(u=t.loginForm.get("password"))?null:u.invalid)&&((null==(u=t.loginForm.get("password"))?null:u.dirty)||(null==(u=t.loginForm.get("password"))?null:u.touched))),e.xp6(3),e.Q6J("disabled",!t.loginForm.valid)}},dependencies:[c.O5,g._Y,g.JJ,g.JL,r.YG,r.PM,r.FN,r.Zi,r.Dq,r.wI,r.W2,r.pK,r.Ie,r.Q$,r.uN,r.Nd,r.j9,g.sg,g.u],styles:[".login-form[_ngcontent-%COMP%]{margin-top:50%}"]}),a})()}];let b=(()=>{var o;class a{}return(o=a).\u0275fac=function(n){return new(n||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[d.Bz.forChild(L),d.Bz]}),a})();var Z=l(6208);let F=(()=>{var o;class a{}return(o=a).\u0275fac=function(n){return new(n||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[c.ez,g.u5,r.Pc,b,Z.m]}),a})()}}]);